{"version":2,"kind":"Notebook","sha256":"8c261d3526feaeb655df76ba46b5d7c5c44c390bfc879accc65bf523d03475a8","slug":"notebooks.xbatcher-dataloading","location":"/notebooks/xbatcher_dataloading.ipynb","dependencies":[],"frontmatter":{"title":"Loading Batches from Xarray Objects","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"cookbook-dev","language":"python"},"authors":[{"nameParsed":{"literal":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","given":"and The Project Pythia Community","family":"Keenan Ganz","suffix":"Nabin Kalauni"},"name":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/xbatcher-deep-learning","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/xbatcher-deep-learning/blob/main/notebooks/xbatcher_dataloading.ipynb","exports":[{"format":"ipynb","filename":"xbatcher_dataloading.ipynb","url":"/xbatcher-deep-learning/build/xbatcher_dataloading-7533a44de80c8f37cdc0fe0b9183033a.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JcYSKufLii"}],"key":"XOONb2qoDD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DFaH3wiq1v"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"xSHQD1IDPk"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Working with large, multi-dimensional datasets, common in fields like climate science and oceanography, presents a significant challenge when preparing data for machine learning models. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Rn9pmW6KHY"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jfyl7xf5of"},{"type":"text","value":" library is designed to simplify this preprocessing step by serving as a bridge between the labeled, multi-dimensional data structures of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ad6KshGvYq"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EfGBZlikBq"},{"type":"text","value":" and the tensor-based inputs required by deep learning frameworks such as PyTorch and TensorFlow.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"A52BFlGG5B"}],"key":"wrtb3ZaR8y"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This guide provides an introduction to the fundamentals of ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"t3spTzXG86"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EZjRwpsXRw"},{"type":"text","value":". We will cover how to create a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"eRg9AM1PyL"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OL6z1B6cMZ"},{"type":"text","value":", customize it for specific needs, and prepare the resulting data for integration with a PyTorch model.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"L7IMw4R8LG"}],"key":"HJ9izZL5KP"},{"type":"heading","depth":2,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OWkK8ghr2j"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"jV3F7jhwRB"},{"type":"table","position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"sRYqv6fFP8"}],"key":"tBpsqtrOPk"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"XvXh6YkTTr"}],"key":"bEFwjerhAn"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ltiv7tZocH"}],"key":"MEpYAbFRdN"}],"key":"v4c1ij0zqJ"},{"type":"tableRow","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Intro to Xarray","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"CRRhPKny8q"}],"urlSource":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","key":"kjvZWpnqSO"}],"key":"fK52ri9ysz"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"u8ILiFTeTo"}],"key":"imafMk04RR"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Array indexing","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"AHnSfTCL7A"}],"key":"Gc3G8F0JRY"}],"key":"eB68lPEMG7"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Datasets and DataLoaders","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"km1lGlxOUr"}],"urlSource":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","key":"hlzo2R8wew"}],"key":"s66wHBpHAN"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"hmd9StqI8p"}],"key":"rze8O0FER9"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Batching data","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"V6rNjznIvI"}],"key":"SYghl42bm3"}],"key":"mEw5ekvQN1"}],"key":"TvUKHc1y6I"}],"key":"Es6o3q5xVQ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uuLje3wfCM"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"DtKthBJvzh"}],"key":"BzvDVIW7vC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport torch\nimport xbatcher\nfrom xbatcher.loaders.torch import MapDataset, IterableDataset","key":"wygECWs4en"},{"type":"output","id":"3d1fmw5QYi57QDxKST0d_","data":[],"key":"fBlCqUSyAH"}],"key":"azecO4g4xS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating a Sample Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ucCfcPpVVI"}],"identifier":"creating-a-sample-dataset","label":"Creating a Sample Dataset","html_id":"creating-a-sample-dataset","implicit":true,"key":"ugzbdPnJjQ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To begin, we will create a sample ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dCiQxce82B"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LdAnHtLwFz"},{"type":"text","value":". This allows us to focus on the mechanics of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZpQqiRUWL8"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"g1ae5oWUQ3"},{"type":"text","value":" without the overhead of a specific real-world dataset. This sample can be replaced by any ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"m1LmzM9I0G"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SBlDnwgTSB"},{"type":"text","value":" loaded from a file (e.g., NetCDF, Zarr).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BSzW0fJAB2"}],"key":"dpOCc2oQZ3"}],"key":"Ba1RftJn9V"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds = xr.Dataset(\n    {\n        \"temperature\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n        \"precipitation\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n    },\n    coords={\n        \"x\": np.arange(100),\n        \"y\": np.arange(100),\n        \"time\": np.arange(50),\n    },\n)\nds","key":"h92Mu894g6"},{"type":"output","id":"kmlgityXCW9iWxwTMKOxt","data":[{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.2286 0.5748 ... 0.1466 0.7755\n    precipitation  (x, y, time) float64 4MB 0.8424 0.6461 ... 0.9257 0.09629","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.2286 0.5748 ... 0.1466 0.7755\n    precipitation  (x, y, time) float64 4MB 0.8424 0.6461 ... 0.9257 0.09629</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-45114a85-51bd-40ba-9e4d-16ad818c947b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-45114a85-51bd-40ba-9e4d-16ad818c947b' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 100</li><li><span class='xr-has-index'>y</span>: 100</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-f709ea82-a2dc-4eac-9ff4-bd5564104532' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f709ea82-a2dc-4eac-9ff4-bd5564104532' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-e3f9c187-2ab9-41f4-ab40-f934de2e9111' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e3f9c187-2ab9-41f4-ab40-f934de2e9111' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d51ff28d-dd8f-425d-b8af-8342441c115e' class='xr-var-data-in' type='checkbox'><label for='data-d51ff28d-dd8f-425d-b8af-8342441c115e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-b3c6cf32-e83f-4112-87da-c1132f2c50ad' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b3c6cf32-e83f-4112-87da-c1132f2c50ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e2cb67eb-44e8-4e0d-8fdd-ef09aa921c38' class='xr-var-data-in' type='checkbox'><label for='data-e2cb67eb-44e8-4e0d-8fdd-ef09aa921c38' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-8e1a700c-dd41-4651-b5a9-227761a80452' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8e1a700c-dd41-4651-b5a9-227761a80452' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d08a9c88-e349-4834-b1ff-f751a4ce1942' class='xr-var-data-in' type='checkbox'><label for='data-d08a9c88-e349-4834-b1ff-f751a4ce1942' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cf85b452-086b-4d3a-a99e-378214ec114d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-cf85b452-086b-4d3a-a99e-378214ec114d' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.2286 0.5748 ... 0.1466 0.7755</div><input id='attrs-d8943867-ec9f-4b01-94ab-97304bd2e293' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d8943867-ec9f-4b01-94ab-97304bd2e293' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-11022208-11dd-4834-89a4-271b3969ccfd' class='xr-var-data-in' type='checkbox'><label for='data-11022208-11dd-4834-89a4-271b3969ccfd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[2.28632763e-01, 5.74752195e-01, 4.75529100e-01, ...,\n         5.91551517e-01, 1.44670920e-01, 3.07506396e-01],\n        [1.43818198e-01, 1.67913806e-02, 1.73774195e-01, ...,\n         1.20442949e-01, 1.95475751e-01, 2.35587478e-01],\n        [8.04864227e-01, 2.08919659e-01, 3.18786798e-01, ...,\n         1.44084065e-01, 7.05810942e-01, 6.12329146e-01],\n        ...,\n        [9.41274791e-01, 2.45626070e-01, 9.22384182e-01, ...,\n         3.45732839e-01, 7.60284239e-01, 8.09504618e-01],\n        [1.82082533e-02, 9.48370098e-01, 8.56622454e-01, ...,\n         1.37072743e-02, 5.82538452e-01, 7.60414586e-02],\n        [4.01200227e-01, 8.46713506e-01, 4.52633018e-01, ...,\n         8.56307298e-01, 9.98197446e-01, 1.49161003e-02]],\n\n       [[8.81424492e-01, 1.31214970e-01, 3.57502533e-01, ...,\n         9.94668848e-01, 1.27819647e-02, 7.72158841e-01],\n        [6.12258144e-01, 1.30407660e-01, 6.47373631e-01, ...,\n         2.89928444e-01, 4.80796391e-01, 6.05751289e-01],\n        [3.43925773e-01, 8.88899647e-01, 3.04445131e-01, ...,\n         5.02923819e-01, 1.47896936e-01, 7.31395919e-01],\n...\n         3.69588588e-01, 1.11036287e-01, 2.66657990e-01],\n        [3.40445284e-01, 9.46579918e-01, 3.06054399e-01, ...,\n         9.42092111e-01, 4.66780770e-02, 7.09345220e-01],\n        [1.39621404e-01, 6.09071210e-01, 5.31162881e-01, ...,\n         4.62331768e-01, 3.94079493e-01, 9.56487105e-01]],\n\n       [[3.95601973e-01, 9.95164773e-01, 8.15198305e-01, ...,\n         5.28655761e-01, 5.55362310e-01, 7.80958269e-01],\n        [5.73851332e-01, 2.58542215e-01, 2.13409414e-01, ...,\n         3.11891724e-01, 6.53296232e-01, 1.88843628e-02],\n        [9.59509192e-01, 6.74544033e-01, 2.82260460e-01, ...,\n         6.26879772e-02, 6.72393007e-01, 3.50925780e-01],\n        ...,\n        [9.48966211e-01, 4.11945613e-01, 1.64341822e-01, ...,\n         7.85583263e-01, 7.07306184e-01, 2.27063585e-01],\n        [7.04374687e-01, 9.79585543e-01, 3.23888302e-01, ...,\n         2.23731197e-01, 1.84525082e-02, 7.17663796e-01],\n        [8.12346218e-01, 9.61241230e-01, 9.07476992e-01, ...,\n         1.13000383e-01, 1.46590025e-01, 7.75462698e-01]]],\n      shape=(100, 100, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.8424 0.6461 ... 0.9257 0.09629</div><input id='attrs-0a9249b6-d084-459b-9c75-8d09b68cc52e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0a9249b6-d084-459b-9c75-8d09b68cc52e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-57fdf65b-5c51-49b2-8273-3e2a96faf3f5' class='xr-var-data-in' type='checkbox'><label for='data-57fdf65b-5c51-49b2-8273-3e2a96faf3f5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.84244053, 0.64608692, 0.45992696, ..., 0.38619546,\n         0.30169328, 0.8635041 ],\n        [0.25871376, 0.66134534, 0.15629404, ..., 0.45438503,\n         0.73461341, 0.57257069],\n        [0.98446669, 0.25489966, 0.89872836, ..., 0.00155319,\n         0.87284619, 0.42022335],\n        ...,\n        [0.91992149, 0.96814354, 0.31932581, ..., 0.20354799,\n         0.51681127, 0.6881398 ],\n        [0.1260066 , 0.72864279, 0.29964849, ..., 0.85219853,\n         0.98960512, 0.48526916],\n        [0.13893269, 0.61546345, 0.9580683 , ..., 0.97425073,\n         0.14019282, 0.59742575]],\n\n       [[0.60133057, 0.50847366, 0.87147687, ..., 0.62431991,\n         0.09778022, 0.83241264],\n        [0.4081309 , 0.88640135, 0.16451083, ..., 0.06710492,\n         0.32627443, 0.67305549],\n        [0.23917991, 0.97957185, 0.71296493, ..., 0.33355634,\n         0.12580232, 0.52412515],\n...\n        [0.04107986, 0.27716779, 0.37087486, ..., 0.24817003,\n         0.33045043, 0.64680953],\n        [0.56495479, 0.8064536 , 0.2952182 , ..., 0.46358119,\n         0.10579732, 0.0796331 ],\n        [0.92836006, 0.98817906, 0.70790717, ..., 0.57438226,\n         0.47205885, 0.71303322]],\n\n       [[0.63181218, 0.85286143, 0.28612562, ..., 0.85938588,\n         0.50559628, 0.30472695],\n        [0.69637865, 0.83588065, 0.67002424, ..., 0.88013772,\n         0.89814732, 0.42981119],\n        [0.98416468, 0.26503772, 0.76091003, ..., 0.03610166,\n         0.81720281, 0.38195938],\n        ...,\n        [0.78745017, 0.95219528, 0.13528259, ..., 0.90403502,\n         0.21793069, 0.20553645],\n        [0.36528115, 0.04194408, 0.74295889, ..., 0.27133168,\n         0.28237148, 0.65770101],\n        [0.19423524, 0.73485012, 0.45508641, ..., 0.67308872,\n         0.92574897, 0.09629369]]], shape=(100, 100, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-3e479374-bfaa-4b12-8f1b-68d5518497af' class='xr-section-summary-in' type='checkbox'  ><label for='section-3e479374-bfaa-4b12-8f1b-68d5518497af' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-5bc7dd37-2425-4a31-b468-be5923e77465' class='xr-index-data-in' type='checkbox'/><label for='index-5bc7dd37-2425-4a31-b468-be5923e77465' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-a204bc4f-881b-4e21-a0f0-300d843946b8' class='xr-index-data-in' type='checkbox'/><label for='index-a204bc4f-881b-4e21-a0f0-300d843946b8' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-9a6f978a-d79d-4694-a13d-ebe007eec146' class='xr-index-data-in' type='checkbox'/><label for='index-9a6f978a-d79d-4694-a13d-ebe007eec146' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-8796d90f-6950-44a9-962e-da96fed9c00f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-8796d90f-6950-44a9-962e-da96fed9c00f' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"ZoMEdedAR7"}],"key":"m7HIN2f6Nh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The dataset contains two variables, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WDgUls7As3"},{"type":"inlineCode","value":"temperature","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VhBd8DaIQ8"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oD3fKrZvhh"},{"type":"inlineCode","value":"precipitation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iYrAfBPfph"},{"type":"text","value":", and three dimensions: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dlQAnFwSCc"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"m5H7sAL4Ki"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ALMNcSPzSZ"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OWSRzWCgab"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EadZAyKzZx"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ucXbVASNdF"},{"type":"text","value":". We will now use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZFzw3o0JwG"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bFHQvXlD3z"},{"type":"text","value":" to generate batches from this dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h7jjDHUTzG"}],"key":"V5OtHdIIBv"}],"key":"OcHJqigUo4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HdelwQiiJj"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fjt2jDckpc"}],"identifier":"the-batchgenerator","label":"The BatchGenerator","html_id":"the-batchgenerator","implicit":true,"key":"RMvIF7xt6Q"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zseGmbB5hi"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"spdkajVXe0"},{"type":"text","value":" is the core component of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kxAT90vlg4"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XdtUdwSuQ9"},{"type":"text","value":". It is a Python generator that yields batches of data from an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RzFhZhcPMs"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pqC9Y0VlOn"},{"type":"text","value":" object.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FeGjOKgkFL"}],"key":"E71iPcLHEP"}],"key":"U6lj6PHrNH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen = xbatcher.BatchGenerator(ds, input_dims={\"x\": 10, \"y\": 10})","key":"Guy9H0qYpH"},{"type":"output","id":"moPpaSZPTRMA6c14ucj2V","data":[],"key":"NOlNjmLtlj"}],"key":"SJoEzHSnSd"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Zid4uJ3zBA"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KH3AcgrxmF"},{"type":"text","value":" is initialized with the dataset and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AGHfHCfWV6"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VvnEhSxaVc"},{"type":"text","value":" parameter. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PXkQaZoPGz"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jgt6GVRcmI"},{"type":"text","value":" specifies the size of the batches along each dimension. In this case, we are creating batches of size 10x10 along the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ezG5MYKoUg"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zTs9uYG3nh"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qDYBDcDe63"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mxUGFroKh5"},{"type":"text","value":" dimensions. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v5u3xWnSZc"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bnZBR1i5Wz"},{"type":"text","value":" dimension is not specified, so ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YrpcDPgDGv"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zMau5jDAZS"},{"type":"text","value":" will yield batches that include all time steps.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HlvlFqCelg"}],"key":"Kku4C89gHJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s inspect the first batch generated.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FS9YYV1GHx"}],"key":"rMJwgzLdaE"}],"key":"guh587g6c4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"first_batch = next(iter(bgen))\nfirst_batch","key":"qHkkZs3oMh"},{"type":"output","id":"4WrWgzGoGY_bQVIXnqEtf","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.2286 0.5748 ... 0.6308 0.7906\n    precipitation  (x, y, time) float64 40kB 0.8424 0.6461 ... 0.3967 0.6831","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.2286 0.5748 ... 0.6308 0.7906\n    precipitation  (x, y, time) float64 40kB 0.8424 0.6461 ... 0.3967 0.6831</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-29c217d9-4201-4311-a04c-cb210a418d6d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-29c217d9-4201-4311-a04c-cb210a418d6d' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-eac659b0-f4f9-4c20-8800-173f3a5a275b' class='xr-section-summary-in' type='checkbox'  checked><label for='section-eac659b0-f4f9-4c20-8800-173f3a5a275b' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-8cdb574d-3351-4cdd-a436-5e33539e850f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8cdb574d-3351-4cdd-a436-5e33539e850f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ab727eeb-220a-472f-981c-4620986dccba' class='xr-var-data-in' type='checkbox'><label for='data-ab727eeb-220a-472f-981c-4620986dccba' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-fe68e6f5-f906-4398-808c-c2a6c0e9d47b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-fe68e6f5-f906-4398-808c-c2a6c0e9d47b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a6bb033d-64c0-4df1-8ad3-8177fcad8fc9' class='xr-var-data-in' type='checkbox'><label for='data-a6bb033d-64c0-4df1-8ad3-8177fcad8fc9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-57353020-7773-43bb-9cf4-f9079ceeda01' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-57353020-7773-43bb-9cf4-f9079ceeda01' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ed0df823-47e5-495e-9d54-58dee7a421df' class='xr-var-data-in' type='checkbox'><label for='data-ed0df823-47e5-495e-9d54-58dee7a421df' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ee10ade2-f8aa-42e9-81eb-8f5d759e65cc' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ee10ade2-f8aa-42e9-81eb-8f5d759e65cc' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.2286 0.5748 ... 0.6308 0.7906</div><input id='attrs-03a74233-1fd2-4d5d-a214-b6317dbd078a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-03a74233-1fd2-4d5d-a214-b6317dbd078a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8892e1b3-9f7a-47b3-a939-a8dfb7dbeb6c' class='xr-var-data-in' type='checkbox'><label for='data-8892e1b3-9f7a-47b3-a939-a8dfb7dbeb6c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.22863276, 0.5747522 , 0.4755291 , ..., 0.59155152,\n         0.14467092, 0.3075064 ],\n        [0.1438182 , 0.01679138, 0.17377419, ..., 0.12044295,\n         0.19547575, 0.23558748],\n        [0.80486423, 0.20891966, 0.3187868 , ..., 0.14408406,\n         0.70581094, 0.61232915],\n        ...,\n        [0.05722195, 0.66248347, 0.18350919, ..., 0.11127706,\n         0.48214915, 0.50507764],\n        [0.29997895, 0.1739898 , 0.5683438 , ..., 0.74110592,\n         0.75648408, 0.03254372],\n        [0.72225646, 0.31187034, 0.80001884, ..., 0.71662876,\n         0.5824533 , 0.42617615]],\n\n       [[0.88142449, 0.13121497, 0.35750253, ..., 0.99466885,\n         0.01278196, 0.77215884],\n        [0.61225814, 0.13040766, 0.64737363, ..., 0.28992844,\n         0.48079639, 0.60575129],\n        [0.34392577, 0.88889965, 0.30444513, ..., 0.50292382,\n         0.14789694, 0.73139592],\n...\n        [0.82396949, 0.98989794, 0.60235942, ..., 0.46901118,\n         0.4866953 , 0.96900833],\n        [0.94434546, 0.1200019 , 0.01206081, ..., 0.70413427,\n         0.45259478, 0.32188995],\n        [0.74812037, 0.28708911, 0.52356116, ..., 0.85434777,\n         0.77621459, 0.53298388]],\n\n       [[0.63967508, 0.01732091, 0.13341847, ..., 0.88130538,\n         0.71611831, 0.44557317],\n        [0.62760349, 0.45928886, 0.03099606, ..., 0.76650316,\n         0.87962818, 0.02107157],\n        [0.24912268, 0.63155273, 0.2597205 , ..., 0.60385711,\n         0.48363065, 0.76983074],\n        ...,\n        [0.50098911, 0.35818872, 0.47205369, ..., 0.84506706,\n         0.65170196, 0.00274021],\n        [0.08797049, 0.05534483, 0.65883905, ..., 0.34569015,\n         0.57910832, 0.11201306],\n        [0.42954486, 0.54550261, 0.68170049, ..., 0.53952575,\n         0.63076904, 0.79060087]]], shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.8424 0.6461 ... 0.3967 0.6831</div><input id='attrs-e85102a8-c27b-4753-b770-d87d3dfa034b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e85102a8-c27b-4753-b770-d87d3dfa034b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cf4e277b-a1f2-41ca-ba93-5fb791717267' class='xr-var-data-in' type='checkbox'><label for='data-cf4e277b-a1f2-41ca-ba93-5fb791717267' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.84244053, 0.64608692, 0.45992696, ..., 0.38619546,\n         0.30169328, 0.8635041 ],\n        [0.25871376, 0.66134534, 0.15629404, ..., 0.45438503,\n         0.73461341, 0.57257069],\n        [0.98446669, 0.25489966, 0.89872836, ..., 0.00155319,\n         0.87284619, 0.42022335],\n        ...,\n        [0.27770731, 0.12168621, 0.47808614, ..., 0.58313527,\n         0.67610526, 0.04612654],\n        [0.33147397, 0.38874368, 0.14335755, ..., 0.5887049 ,\n         0.17288889, 0.67321685],\n        [0.05433523, 0.82925551, 0.77432852, ..., 0.97390191,\n         0.06292958, 0.53244385]],\n\n       [[0.60133057, 0.50847366, 0.87147687, ..., 0.62431991,\n         0.09778022, 0.83241264],\n        [0.4081309 , 0.88640135, 0.16451083, ..., 0.06710492,\n         0.32627443, 0.67305549],\n        [0.23917991, 0.97957185, 0.71296493, ..., 0.33355634,\n         0.12580232, 0.52412515],\n...\n        [0.08300397, 0.31538243, 0.41382883, ..., 0.28273775,\n         0.53941203, 0.35673195],\n        [0.83033329, 0.8261748 , 0.45295003, ..., 0.20204636,\n         0.75631892, 0.98791189],\n        [0.69837847, 0.19686918, 0.24160831, ..., 0.14927807,\n         0.41777739, 0.57638046]],\n\n       [[0.56431662, 0.26882908, 0.19463546, ..., 0.28671499,\n         0.55067948, 0.14345769],\n        [0.78820901, 0.2272897 , 0.1871459 , ..., 0.17515585,\n         0.75964209, 0.87556422],\n        [0.48500341, 0.67333027, 0.73391823, ..., 0.04733288,\n         0.83418413, 0.55599419],\n        ...,\n        [0.17146226, 0.22193689, 0.04154849, ..., 0.80916234,\n         0.14817451, 0.12513459],\n        [0.93241134, 0.9232077 , 0.54051267, ..., 0.71428924,\n         0.24593031, 0.37289069],\n        [0.27264241, 0.23470599, 0.38645075, ..., 0.96020455,\n         0.39666039, 0.68307836]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a1bcbe20-072a-4b18-a05f-e3045d10827c' class='xr-section-summary-in' type='checkbox'  ><label for='section-a1bcbe20-072a-4b18-a05f-e3045d10827c' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-92f7908e-3b0e-4703-8698-0ed0fd19dcfa' class='xr-index-data-in' type='checkbox'/><label for='index-92f7908e-3b0e-4703-8698-0ed0fd19dcfa' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-a967caba-78bf-41a1-8ea1-640629b9543c' class='xr-index-data-in' type='checkbox'/><label for='index-a967caba-78bf-41a1-8ea1-640629b9543c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-2235fe72-acfa-46d8-bc17-9de66b7a94ee' class='xr-index-data-in' type='checkbox'/><label for='index-2235fe72-acfa-46d8-bc17-9de66b7a94ee' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-2c945cdf-f8a4-4422-9e28-2b2eb961f34d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-2c945cdf-f8a4-4422-9e28-2b2eb961f34d' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"CPu2ZGmahs"}],"key":"XGtIWJtLSw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"comment","value":" Horizontal lines ","key":"CTU9rY4CB5"},{"type":"comment","value":" Vertical lines ","key":"s7Iw0jV2xh"},{"type":"comment","value":" Colored Rectangle ","key":"gczHVfAQct"},{"type":"comment","value":" Horizontal lines ","key":"PJo20SebRJ"},{"type":"comment","value":" Vertical lines ","key":"m9mM0J9PcJ"},{"type":"comment","value":" Colored Rectangle ","key":"PLeODK9l8j"},{"type":"comment","value":" Horizontal lines ","key":"unYHNAYSjF"},{"type":"comment","value":" Vertical lines ","key":"mkalMkFTVM"},{"type":"comment","value":" Colored Rectangle ","key":"vkBj3jfsFf"},{"type":"comment","value":" Text ","key":"W1kXQAuUm7"}],"key":"buUFUs71lk"}],"key":"Vhw004XvYj"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The first batch has dimensions ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EbWVaNF9YM"},{"type":"inlineCode","value":"x=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BOIjt2TWam"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CGcfgjacaT"},{"type":"inlineCode","value":"y=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hyD0KnQ3LV"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CSOSa7S3uI"},{"type":"inlineCode","value":"time=50","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"szZhQmzFSx"},{"type":"text","value":", as expected. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZRM5simWXk"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yrTmWXxTT3"},{"type":"text","value":" will yield 100 batches in total (10 batches in the x-direction * 10 batches in the y-direction).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uTok5v5JxW"}],"key":"lB2fi2TQcu"}],"key":"UPg6p2IxvT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"The BatchGenerator contains {len(bgen)} batches.\")","key":"yPxMi2Ys2n"},{"type":"output","id":"nVjtkc6VdphV5bdin5XOz","data":[{"output_type":"stream","name":"stdout","text":"The BatchGenerator contains 100 batches.\n"}],"key":"cUcWhQY3t3"}],"key":"YwibokW54N"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overlapping Batches with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MttKNqOxxc"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gWcxdc8sBU"}],"identifier":"overlapping-batches-with-input-overlap","label":"Overlapping Batches with input_overlap","html_id":"overlapping-batches-with-input-overlap","implicit":true,"key":"NVM8MYRthJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In many applications, it is useful to have overlapping batches to provide context from neighboring data points. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XPeGMTLIVc"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ux5StzKYkX"},{"type":"text","value":" parameter allows for this.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gE5AegopGm"}],"key":"kl6BuaYR98"}],"key":"LJKLd3d3bv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen_overlap = xbatcher.BatchGenerator(\n    ds, \n    input_dims={\"x\": 10, \"y\": 10}, \n    input_overlap={\"x\": 2, \"y\": 2}\n)\nfirst_batch_overlap = next(iter(bgen_overlap))\nfirst_batch_overlap","key":"LlY4yWBcJP"},{"type":"output","id":"1_C9QfbkQnLbGbmT5TVOw","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.2286 0.5748 ... 0.6308 0.7906\n    precipitation  (x, y, time) float64 40kB 0.8424 0.6461 ... 0.3967 0.6831","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.2286 0.5748 ... 0.6308 0.7906\n    precipitation  (x, y, time) float64 40kB 0.8424 0.6461 ... 0.3967 0.6831</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-f535e824-3ebc-4dd1-a7a6-ff3ffb4e7ff6' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f535e824-3ebc-4dd1-a7a6-ff3ffb4e7ff6' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-32005b95-ddff-4120-bf79-76bc155a5c21' class='xr-section-summary-in' type='checkbox'  checked><label for='section-32005b95-ddff-4120-bf79-76bc155a5c21' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-020013fc-8fdf-4293-9a3a-4e800eee0b6b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-020013fc-8fdf-4293-9a3a-4e800eee0b6b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a564850d-747d-4072-bc59-975df0a8ceb3' class='xr-var-data-in' type='checkbox'><label for='data-a564850d-747d-4072-bc59-975df0a8ceb3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-b24c3db3-2d40-4ea0-8757-de0e2e9ea3e7' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b24c3db3-2d40-4ea0-8757-de0e2e9ea3e7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-690a714d-7dc6-4aab-a343-a5dcd096e2a9' class='xr-var-data-in' type='checkbox'><label for='data-690a714d-7dc6-4aab-a343-a5dcd096e2a9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-bc344e26-adcc-46b8-ba4e-3a1aaad3f771' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-bc344e26-adcc-46b8-ba4e-3a1aaad3f771' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-88df4741-c0c1-41b9-aa26-75c6ede9f581' class='xr-var-data-in' type='checkbox'><label for='data-88df4741-c0c1-41b9-aa26-75c6ede9f581' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ff22be05-f426-4a7a-addd-639f9190d142' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ff22be05-f426-4a7a-addd-639f9190d142' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.2286 0.5748 ... 0.6308 0.7906</div><input id='attrs-5736ff09-e15b-4db0-a1ed-01d978753906' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5736ff09-e15b-4db0-a1ed-01d978753906' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6ae24087-832b-4688-aa2b-540379c63361' class='xr-var-data-in' type='checkbox'><label for='data-6ae24087-832b-4688-aa2b-540379c63361' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.22863276, 0.5747522 , 0.4755291 , ..., 0.59155152,\n         0.14467092, 0.3075064 ],\n        [0.1438182 , 0.01679138, 0.17377419, ..., 0.12044295,\n         0.19547575, 0.23558748],\n        [0.80486423, 0.20891966, 0.3187868 , ..., 0.14408406,\n         0.70581094, 0.61232915],\n        ...,\n        [0.05722195, 0.66248347, 0.18350919, ..., 0.11127706,\n         0.48214915, 0.50507764],\n        [0.29997895, 0.1739898 , 0.5683438 , ..., 0.74110592,\n         0.75648408, 0.03254372],\n        [0.72225646, 0.31187034, 0.80001884, ..., 0.71662876,\n         0.5824533 , 0.42617615]],\n\n       [[0.88142449, 0.13121497, 0.35750253, ..., 0.99466885,\n         0.01278196, 0.77215884],\n        [0.61225814, 0.13040766, 0.64737363, ..., 0.28992844,\n         0.48079639, 0.60575129],\n        [0.34392577, 0.88889965, 0.30444513, ..., 0.50292382,\n         0.14789694, 0.73139592],\n...\n        [0.82396949, 0.98989794, 0.60235942, ..., 0.46901118,\n         0.4866953 , 0.96900833],\n        [0.94434546, 0.1200019 , 0.01206081, ..., 0.70413427,\n         0.45259478, 0.32188995],\n        [0.74812037, 0.28708911, 0.52356116, ..., 0.85434777,\n         0.77621459, 0.53298388]],\n\n       [[0.63967508, 0.01732091, 0.13341847, ..., 0.88130538,\n         0.71611831, 0.44557317],\n        [0.62760349, 0.45928886, 0.03099606, ..., 0.76650316,\n         0.87962818, 0.02107157],\n        [0.24912268, 0.63155273, 0.2597205 , ..., 0.60385711,\n         0.48363065, 0.76983074],\n        ...,\n        [0.50098911, 0.35818872, 0.47205369, ..., 0.84506706,\n         0.65170196, 0.00274021],\n        [0.08797049, 0.05534483, 0.65883905, ..., 0.34569015,\n         0.57910832, 0.11201306],\n        [0.42954486, 0.54550261, 0.68170049, ..., 0.53952575,\n         0.63076904, 0.79060087]]], shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.8424 0.6461 ... 0.3967 0.6831</div><input id='attrs-e386525d-aad8-4eb1-9edd-d4d094c6c629' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e386525d-aad8-4eb1-9edd-d4d094c6c629' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ec6411b6-2a2e-4480-9d5d-0f71b4ca00fb' class='xr-var-data-in' type='checkbox'><label for='data-ec6411b6-2a2e-4480-9d5d-0f71b4ca00fb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.84244053, 0.64608692, 0.45992696, ..., 0.38619546,\n         0.30169328, 0.8635041 ],\n        [0.25871376, 0.66134534, 0.15629404, ..., 0.45438503,\n         0.73461341, 0.57257069],\n        [0.98446669, 0.25489966, 0.89872836, ..., 0.00155319,\n         0.87284619, 0.42022335],\n        ...,\n        [0.27770731, 0.12168621, 0.47808614, ..., 0.58313527,\n         0.67610526, 0.04612654],\n        [0.33147397, 0.38874368, 0.14335755, ..., 0.5887049 ,\n         0.17288889, 0.67321685],\n        [0.05433523, 0.82925551, 0.77432852, ..., 0.97390191,\n         0.06292958, 0.53244385]],\n\n       [[0.60133057, 0.50847366, 0.87147687, ..., 0.62431991,\n         0.09778022, 0.83241264],\n        [0.4081309 , 0.88640135, 0.16451083, ..., 0.06710492,\n         0.32627443, 0.67305549],\n        [0.23917991, 0.97957185, 0.71296493, ..., 0.33355634,\n         0.12580232, 0.52412515],\n...\n        [0.08300397, 0.31538243, 0.41382883, ..., 0.28273775,\n         0.53941203, 0.35673195],\n        [0.83033329, 0.8261748 , 0.45295003, ..., 0.20204636,\n         0.75631892, 0.98791189],\n        [0.69837847, 0.19686918, 0.24160831, ..., 0.14927807,\n         0.41777739, 0.57638046]],\n\n       [[0.56431662, 0.26882908, 0.19463546, ..., 0.28671499,\n         0.55067948, 0.14345769],\n        [0.78820901, 0.2272897 , 0.1871459 , ..., 0.17515585,\n         0.75964209, 0.87556422],\n        [0.48500341, 0.67333027, 0.73391823, ..., 0.04733288,\n         0.83418413, 0.55599419],\n        ...,\n        [0.17146226, 0.22193689, 0.04154849, ..., 0.80916234,\n         0.14817451, 0.12513459],\n        [0.93241134, 0.9232077 , 0.54051267, ..., 0.71428924,\n         0.24593031, 0.37289069],\n        [0.27264241, 0.23470599, 0.38645075, ..., 0.96020455,\n         0.39666039, 0.68307836]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ae61adb9-127c-40f4-95ee-9be526ff5d9b' class='xr-section-summary-in' type='checkbox'  ><label for='section-ae61adb9-127c-40f4-95ee-9be526ff5d9b' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f32f827e-2acd-4c9d-b914-1103eb85b5be' class='xr-index-data-in' type='checkbox'/><label for='index-f32f827e-2acd-4c9d-b914-1103eb85b5be' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-104c3c63-ccf8-43f9-a714-12911c3dfa15' class='xr-index-data-in' type='checkbox'/><label for='index-104c3c63-ccf8-43f9-a714-12911c3dfa15' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-3c9b3ea3-96b5-4d2e-9f25-a5fe21b1b0c1' class='xr-index-data-in' type='checkbox'/><label for='index-3c9b3ea3-96b5-4d2e-9f25-a5fe21b1b0c1' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6e04fffc-dade-4084-ac54-09f3ba12cfb8' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-6e04fffc-dade-4084-ac54-09f3ba12cfb8' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"wvs8ZFopAz"}],"key":"GY2CQAGfNf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BB13Ta1113"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"O95tPpZ7Is"},{"type":"text","value":" parameter specifies the number of elements to overlap between consecutive batches. The size of the batches themselves does not change. Let’s verify this by inspecting the coordinates of the first two batches.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bXWJ667dD3"}],"key":"uq5TBSt3Jx"}],"key":"FH1nN3lbbn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"Batch 1 y-coords: {bgen_overlap[0].y.values}, Batch 1 x-coords: {bgen_overlap[0].x.values}\")\nprint(f\"Batch 2 y-coords: {bgen_overlap[1].y.values}, Batch 2 x-coords: {bgen_overlap[1].x.values}\")\nprint(f\"Batch 3 y-coords: {bgen_overlap[2].y.values}, Batch 3 x-coords: {bgen_overlap[2].x.values}\")\nprint(f\"Batch 13 y-coords: {bgen_overlap[12].y.values}, Batch 13 x-coords: {bgen_overlap[12].x.values}\")\nprint(f\"Batch 14 y-coords: {bgen_overlap[13].y.values}, Batch 11 x-coords: {bgen_overlap[13].x.values}\")","key":"tuAyMn49tB"},{"type":"output","id":"4vftvOshdbO34VTLOBXJY","data":[{"output_type":"stream","name":"stdout","text":"Batch 1 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 1 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 2 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 2 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 3 y-coords: [16 17 18 19 20 21 22 23 24 25], Batch 3 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 13 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 13 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\nBatch 14 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 11 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\n"}],"key":"hqcDX3QaJ7"}],"key":"nfShXHqJYX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As you can see, the second batch starts at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZeCPZbx3HM"},{"type":"inlineCode","value":"y=8","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KhXIDxaHxv"},{"type":"text","value":", which is an overlap of 2 elements with the first batch, which ends at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j7oBXv9Xq0"},{"type":"inlineCode","value":"y=9","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pVxMONyt3F"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MIUjgjtQHo"}],"key":"Amkg8XXMdH"}],"key":"Yahj1g3J2G"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Integration with PyTorch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ac6wXZg2Z8"}],"identifier":"integration-with-pytorch","label":"Integration with PyTorch","html_id":"integration-with-pytorch","implicit":true,"key":"gKESjDut9P"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ay6KNdSilt"},{"type":"text","value":" provides ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"O6DCHYUuLF"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mwwFg0N29g"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DKXzOnCZUB"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PXQCpjyaOF"},{"type":"text","value":" to wrap the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bJSsokR49E"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"n7XsiNKnGy"},{"type":"text","value":" for use with PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oOxZQinpcs"}],"key":"T06saWhpNN"}],"key":"sLhGmqqprc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VdKiENLQog"},{"type":"text","value":" vs. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ms0lzft97t"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lgGMfpLB1o"}],"identifier":"mapdataset-vs-iterabledataset","label":"MapDataset vs. IterableDataset","html_id":"mapdataset-vs-iterabledataset","implicit":true,"key":"tLkUxbD1QM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GwALd0bxeB"},{"type":"text","value":": Implements ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"o8FKTIKYqx"},{"type":"inlineCode","value":"__getitem__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LaEUMjum5E"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WxFrXCQsN8"},{"type":"inlineCode","value":"__len__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IOFhSxe39S"},{"type":"text","value":", allowing for random access to data samples. This is the most common type of dataset in PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Zk3SZ1UG1K"}],"key":"wfxFN26bpf"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"HszoDePzDi"},{"type":"text","value":": Implements ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"cgRcwf56HE"},{"type":"inlineCode","value":"__iter__","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"l5sAwyxXrK"},{"type":"text","value":", and is suitable for very large datasets that may not fit into memory, as it streams data.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"OY9K7q59Ii"}],"key":"zsYO2BU2j8"}],"key":"QEjT98aeB5"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We will use ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"pmWVwifibX"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cksnY1gqaU"},{"type":"text","value":" for this example.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ejUxITFpEU"}],"key":"bhd3r3qERb"}],"key":"YEs6X8ib3q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen[0].temperature.shape\nbgen[0].precipitation.shape","key":"k8N0iHHojL"},{"type":"output","id":"PsEmaR6iJ-IedKvnfpvPt","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"(10, 10, 50)","content_type":"text/plain"}}}],"key":"z0f6LrT148"}],"key":"tGmBPVgR3b"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def patch_to_tensor(patch):\n    temp_patch = torch.tensor(patch.temperature.data)\n    prcp_patch = torch.tensor(patch.precipitation.data)\n    stacked_patch = torch.stack((temp_patch, prcp_patch), dim=0)\n    patch = stacked_patch\n    patch = torch.nan_to_num(patch)\n    # patch = torch.unsqueeze(patch, 0)\n    patch = patch.float()\n    return patch\n\nmap_ds = MapDataset(bgen, transform=patch_to_tensor)","key":"n6TbH13r6b"},{"type":"output","id":"2Q4T0SeVUQHvnwWmpA8Wp","data":[],"key":"hakLs8Ayn7"}],"key":"YQAhNLV5Hk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jdmzcRo6Rz"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iLiO3U0k1J"},{"type":"text","value":" can then be used with a PyTorch ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YQg2sb3IHN"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Y7YYuGnPDI"},{"type":"text","value":", which provides utilities for shuffling, batching, and multiprocessing.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sRIjDliroM"}],"key":"WREDDdTxS9"}],"key":"sJGDr2Sn6E"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dataloader = torch.utils.data.DataLoader(map_ds, batch_size=4)","key":"xTbGCuMxaA"},{"type":"output","id":"E0wyaVPcu8ZaET4rIoc3B","data":[],"key":"S6SQdqMBCy"}],"key":"m6wEXcoAVw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspecting a batch from the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SNPS8QCBQi"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W2LKO8Clch"},{"type":"text","value":" reveals a batch of PyTorch tensors.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AWEvh7UsoS"}],"key":"DAKjTLXkJJ"}],"key":"ClpyVYz50x"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"torch_batch = next(iter(dataloader))\ntorch_batch.shape","key":"LVKsL2LYS8"},{"type":"output","id":"eoboretTde020SDU2qqbJ","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"torch.Size([4, 2, 10, 10, 50])","content_type":"text/plain"}}}],"key":"Ga6Ls81Eh2"}],"key":"jxdlL2exTB"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w23IRotPBm"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JOIFSj3Wbi"},{"type":"text","value":" has stacked 4 of the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v3G68uvJVw"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"V7rHnCCAlf"},{"type":"text","value":" batches, creating a new ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hQHwbTTaYW"},{"type":"inlineCode","value":"batch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XVpeGjfMe7"},{"type":"text","value":" dimension of size 4. The data is now ready for use in a PyTorch model.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lGxDW49pPk"}],"key":"YcnZ0yzsBU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the next notebook, we will explore how to reconstruct an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IBDOQafFhg"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uvNtVL9y2r"},{"type":"text","value":" from a model’s output.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dLl5pbH04Y"}],"key":"foqjgvwH9c"}],"key":"cyDS0KIZ5d"}],"key":"Y0oDTcFeag"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Reconstructing Xarray Datasets from Model Outputs","url":"/notebooks/xbatcher-reconstruction","group":"Xbatcher fundamentals"}}},"domain":"http://localhost:3000"}