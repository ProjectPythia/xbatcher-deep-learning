{"version":2,"kind":"Notebook","sha256":"8c261d3526feaeb655df76ba46b5d7c5c44c390bfc879accc65bf523d03475a8","slug":"notebooks.xbatcher-dataloading","location":"/notebooks/xbatcher_dataloading.ipynb","dependencies":[],"frontmatter":{"title":"Loading Batches from Xarray Objects","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"cookbook-dev","language":"python"},"authors":[{"nameParsed":{"literal":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","given":"and The Project Pythia Community","family":"Keenan Ganz","suffix":"Nabin Kalauni"},"name":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/xbatcher-deep-learning","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/xbatcher-deep-learning/blob/main/notebooks/xbatcher_dataloading.ipynb","exports":[{"format":"ipynb","filename":"xbatcher_dataloading.ipynb","url":"/xbatcher-deep-learning/build/xbatcher_dataloading-6e8eedd5a2d3473e86ea2b7037710551.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"swFXcZfWz7"}],"key":"pmdPExq3mB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jVXQcq8Bfe"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"aHsD0H2ZSm"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Working with large, multi-dimensional datasets, common in fields like climate science and oceanography, presents a significant challenge when preparing data for machine learning models. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"utaChuH2Vf"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"F7dEc2aDuS"},{"type":"text","value":" library is designed to simplify this preprocessing step by serving as a bridge between the labeled, multi-dimensional data structures of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ml0LluLW1A"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QfiBPT1RTP"},{"type":"text","value":" and the tensor-based inputs required by deep learning frameworks such as PyTorch and TensorFlow.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oTl73wDeAQ"}],"key":"HqrJcc4EWX"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This guide provides an introduction to the fundamentals of ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Oo2TKUNUEQ"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"n9r0gAC56e"},{"type":"text","value":". We will cover how to create a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KzJgpIU8CV"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qAZ9Rhn586"},{"type":"text","value":", customize it for specific needs, and prepare the resulting data for integration with a PyTorch model.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"oMsVf0ieaz"}],"key":"i2tqEhN32Q"},{"type":"heading","depth":2,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"MHpVJwcLg2"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"sVn5hMhxvq"},{"type":"table","position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"UU83Zpgrjc"}],"key":"gzz4sZJvmJ"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"aCgGfaWWqs"}],"key":"ycjD6jl964"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Olm0GaICXw"}],"key":"bKC6lCPF8F"}],"key":"jizZwVEuqI"},{"type":"tableRow","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Intro to Xarray","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"YGR8JiG90b"}],"urlSource":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","key":"x8k94bKizg"}],"key":"eC1zp9ny1s"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GnFf3Jmkak"}],"key":"zFVaJbZDda"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Array indexing","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"hT4XagMwDW"}],"key":"Ibjuc0Yyo8"}],"key":"WVT1JlpcMZ"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Datasets and DataLoaders","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"CZlzn6OR9x"}],"urlSource":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","key":"n80hq9JtZz"}],"key":"OxCXpx2OYB"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"YQpFh1HWSM"}],"key":"zXpk95JycT"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Batching data","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"I0bvR1hWJZ"}],"key":"urTC9hTfiT"}],"key":"aeI06dGQWk"}],"key":"n54W5Cas40"}],"key":"CuH7Js1nEZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iAdVD3qViK"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"SqAwvv982I"}],"key":"cDsM7aukyc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport torch\nimport xbatcher\nfrom xbatcher.loaders.torch import MapDataset, IterableDataset","key":"mjCy9DmetC"},{"type":"output","id":"xDeqKQTP3DoMxSAMFF1qN","data":[],"key":"ftDD2Oa4dd"}],"key":"i41Lbb6a4T"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating a Sample Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cUoMpyAerl"}],"identifier":"creating-a-sample-dataset","label":"Creating a Sample Dataset","html_id":"creating-a-sample-dataset","implicit":true,"key":"OqcB0LyLX6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To begin, we will create a sample ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CQw9hkjByL"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"avfnr3nzJF"},{"type":"text","value":". This allows us to focus on the mechanics of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uoaqL3Puba"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Qjrs3JncCh"},{"type":"text","value":" without the overhead of a specific real-world dataset. This sample can be replaced by any ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ByNl6KAq2C"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cTncRlj9iS"},{"type":"text","value":" loaded from a file (e.g., NetCDF, Zarr).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LdIzGV0z56"}],"key":"MNLbEheT21"}],"key":"m8kMNWhOX7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds = xr.Dataset(\n    {\n        \"temperature\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n        \"precipitation\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n    },\n    coords={\n        \"x\": np.arange(100),\n        \"y\": np.arange(100),\n        \"time\": np.arange(50),\n    },\n)\nds","key":"NolqKiPCzl"},{"type":"output","id":"7WgZzNbZ62X8AWhQ4mGzY","data":[{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.8718 0.4989 ... 0.2903 0.9011\n    precipitation  (x, y, time) float64 4MB 0.5097 0.386 ... 0.7846 0.07008","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.8718 0.4989 ... 0.2903 0.9011\n    precipitation  (x, y, time) float64 4MB 0.5097 0.386 ... 0.7846 0.07008</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-30da7ff0-5522-4586-b196-a20d315b778c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-30da7ff0-5522-4586-b196-a20d315b778c' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 100</li><li><span class='xr-has-index'>y</span>: 100</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-c83bdd74-7e07-4ba9-9f6b-b1e74658111c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c83bdd74-7e07-4ba9-9f6b-b1e74658111c' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-6a1ce00a-bf5f-40fc-8c53-c149dfbf2298' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6a1ce00a-bf5f-40fc-8c53-c149dfbf2298' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c0297cb1-d568-4259-a9b6-a201cfc3cc31' class='xr-var-data-in' type='checkbox'><label for='data-c0297cb1-d568-4259-a9b6-a201cfc3cc31' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-a84821ba-fd0e-4359-be89-9a7906c628fb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a84821ba-fd0e-4359-be89-9a7906c628fb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-59db347f-692e-434b-9689-69fe4eb90e3f' class='xr-var-data-in' type='checkbox'><label for='data-59db347f-692e-434b-9689-69fe4eb90e3f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-c112a4c4-3494-4dec-9c08-593ab9739ee3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c112a4c4-3494-4dec-9c08-593ab9739ee3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c8b9fba9-848f-4b64-9269-afb3ce0ff364' class='xr-var-data-in' type='checkbox'><label for='data-c8b9fba9-848f-4b64-9269-afb3ce0ff364' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f2cc3929-32c7-4051-9009-e9903ab47ea7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f2cc3929-32c7-4051-9009-e9903ab47ea7' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.8718 0.4989 ... 0.2903 0.9011</div><input id='attrs-2e5d9dbd-bb2d-43dd-82a1-1ad8ca0854d2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2e5d9dbd-bb2d-43dd-82a1-1ad8ca0854d2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6541c922-5303-44f9-b6d0-5e3d607ef952' class='xr-var-data-in' type='checkbox'><label for='data-6541c922-5303-44f9-b6d0-5e3d607ef952' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[8.71773821e-01, 4.98874863e-01, 4.27672130e-03, ...,\n         1.74218461e-01, 7.48960373e-01, 3.57062059e-01],\n        [2.76307340e-01, 7.31071208e-01, 2.65992968e-01, ...,\n         8.24580509e-01, 6.60601080e-01, 7.04215620e-01],\n        [6.27876360e-01, 1.65943019e-01, 4.83652474e-01, ...,\n         3.78754614e-01, 1.33751947e-01, 6.51772197e-01],\n        ...,\n        [1.99459434e-01, 5.60939970e-01, 8.64692106e-01, ...,\n         5.84308765e-01, 8.85053448e-01, 2.13803578e-01],\n        [3.94124320e-01, 5.98483698e-01, 8.27666522e-01, ...,\n         6.72109438e-01, 4.92778809e-01, 3.19054350e-01],\n        [9.06422147e-01, 7.90960975e-01, 3.12968657e-01, ...,\n         3.58346292e-01, 8.80527566e-01, 7.88589392e-01]],\n\n       [[6.63938985e-01, 6.13395517e-01, 3.74130370e-01, ...,\n         9.19889379e-01, 6.63570718e-01, 5.64805436e-01],\n        [8.56267875e-01, 8.28481317e-01, 8.67098563e-01, ...,\n         2.70652801e-02, 8.71791412e-01, 1.54738423e-01],\n        [2.04113430e-01, 1.00424934e-01, 6.51842824e-01, ...,\n         7.23401116e-01, 9.62744512e-01, 8.47943809e-01],\n...\n         2.45823462e-01, 5.60151456e-02, 1.45942774e-01],\n        [9.50819641e-01, 6.99489319e-02, 3.74501223e-01, ...,\n         6.42815401e-01, 2.74166959e-02, 6.84235402e-01],\n        [5.10616733e-01, 6.14513310e-02, 9.84913323e-01, ...,\n         9.19874879e-02, 8.33136401e-01, 4.31968393e-01]],\n\n       [[3.92422507e-01, 5.04472623e-01, 2.70845547e-01, ...,\n         9.97494766e-01, 3.27790851e-01, 8.07291278e-01],\n        [5.44884440e-01, 1.86090162e-01, 2.24928245e-02, ...,\n         9.40794990e-01, 4.13672041e-01, 6.72829190e-01],\n        [7.46088681e-01, 3.93221858e-01, 5.58167477e-02, ...,\n         8.65442489e-01, 4.89413599e-01, 8.53484929e-01],\n        ...,\n        [4.19653911e-01, 9.91872952e-01, 3.82009352e-02, ...,\n         3.92230540e-03, 8.19559206e-01, 3.76605426e-01],\n        [9.15458150e-02, 1.33842890e-01, 1.00789273e-01, ...,\n         1.39780521e-02, 3.02843513e-01, 5.95887006e-01],\n        [7.88428511e-01, 9.31936091e-01, 8.32521522e-02, ...,\n         8.36182079e-01, 2.90289078e-01, 9.01125423e-01]]],\n      shape=(100, 100, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.5097 0.386 ... 0.7846 0.07008</div><input id='attrs-1bb88589-46d6-4af4-b276-b5101173ab5d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1bb88589-46d6-4af4-b276-b5101173ab5d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-55e803d9-9d21-4037-94fa-7b937c6620c0' class='xr-var-data-in' type='checkbox'><label for='data-55e803d9-9d21-4037-94fa-7b937c6620c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.50965876, 0.38598224, 0.08719731, ..., 0.49739082,\n         0.53439086, 0.81741891],\n        [0.97615091, 0.58620182, 0.71847458, ..., 0.47277039,\n         0.99156918, 0.9115682 ],\n        [0.87118306, 0.56945869, 0.43337612, ..., 0.37334417,\n         0.04295212, 0.08760951],\n        ...,\n        [0.29406772, 0.22739751, 0.81442792, ..., 0.22708992,\n         0.89236174, 0.61802772],\n        [0.37190374, 0.60471705, 0.93297736, ..., 0.84929825,\n         0.74116839, 0.23451621],\n        [0.09475862, 0.42349698, 0.45315858, ..., 0.01662177,\n         0.27978079, 0.57557256]],\n\n       [[0.53588968, 0.43417583, 0.3390482 , ..., 0.58503248,\n         0.34426976, 0.02164465],\n        [0.62018817, 0.07952304, 0.24685818, ..., 0.91478476,\n         0.87987382, 0.94762858],\n        [0.04078154, 0.51954566, 0.65078528, ..., 0.08862355,\n         0.98100073, 0.43553466],\n...\n        [0.76244775, 0.37753186, 0.50437881, ..., 0.52921089,\n         0.93778749, 0.74699023],\n        [0.85458317, 0.31734897, 0.79703667, ..., 0.30079932,\n         0.37902889, 0.24995009],\n        [0.7575546 , 0.7505373 , 0.23578488, ..., 0.80958902,\n         0.5771706 , 0.73700718]],\n\n       [[0.76830112, 0.76866055, 0.43645181, ..., 0.03022052,\n         0.13692175, 0.62576132],\n        [0.55571046, 0.26498444, 0.7434391 , ..., 0.36782369,\n         0.33929176, 0.75852025],\n        [0.02956765, 0.69931562, 0.85889936, ..., 0.61833203,\n         0.38346883, 0.03099134],\n        ...,\n        [0.04876793, 0.23280737, 0.79360966, ..., 0.46228155,\n         0.75337849, 0.48201348],\n        [0.93970843, 0.14337698, 0.03020622, ..., 0.44928308,\n         0.10132482, 0.03827906],\n        [0.38959748, 0.37759806, 0.13602195, ..., 0.77000583,\n         0.78455539, 0.07007997]]], shape=(100, 100, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-39b29e8c-d2be-4a12-b63f-7ab8a9b61b1f' class='xr-section-summary-in' type='checkbox'  ><label for='section-39b29e8c-d2be-4a12-b63f-7ab8a9b61b1f' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-7e1eb105-0af9-42ab-a02f-e8dbcd311b59' class='xr-index-data-in' type='checkbox'/><label for='index-7e1eb105-0af9-42ab-a02f-e8dbcd311b59' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f412cf68-7257-45b2-a06b-0c5564db96fd' class='xr-index-data-in' type='checkbox'/><label for='index-f412cf68-7257-45b2-a06b-0c5564db96fd' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f1312a3d-faed-4fcc-8b44-9e42a586f8af' class='xr-index-data-in' type='checkbox'/><label for='index-f1312a3d-faed-4fcc-8b44-9e42a586f8af' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-501e6ee9-6aa1-4ad2-addc-f575c5307bf0' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-501e6ee9-6aa1-4ad2-addc-f575c5307bf0' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"cnivEntu8r"}],"key":"pEmHSKUSeZ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The dataset contains two variables, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZNiMqivx35"},{"type":"inlineCode","value":"temperature","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H6ifbne4F9"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GfSM7VRuGM"},{"type":"inlineCode","value":"precipitation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DhZx6Os1zl"},{"type":"text","value":", and three dimensions: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DFt8l1bE5X"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"C3XgDZXi3f"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l3X9WNrDdM"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AX9RyBzYxL"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H5g0kiT5ws"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fRy6fOG42u"},{"type":"text","value":". We will now use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bYQgEeAdZ9"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q7sHARsCeo"},{"type":"text","value":" to generate batches from this dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SMvmZKr4UT"}],"key":"wybGE3EZZJ"}],"key":"QRzqrx1efQ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zROKdBuj3k"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vyK4K0CxUs"}],"identifier":"the-batchgenerator","label":"The BatchGenerator","html_id":"the-batchgenerator","implicit":true,"key":"nYQN3Iqjzf"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RBMjAE2hrq"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FNc55l68go"},{"type":"text","value":" is the core component of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iECWhorC1O"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XyV7RmVb0k"},{"type":"text","value":". It is a Python generator that yields batches of data from an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Hmb8xJte6K"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PUDrarPpe2"},{"type":"text","value":" object.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MxDrt5gh0a"}],"key":"AiNRFFHDoF"}],"key":"dIVqSYn2rf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen = xbatcher.BatchGenerator(ds, input_dims={\"x\": 10, \"y\": 10})","key":"mOFEfzJfcH"},{"type":"output","id":"hXR84Ejkagrtmf--iB8AU","data":[],"key":"GwYdBkOJc7"}],"key":"apHPHAQmK6"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aKM2FAi0J6"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U6OptTb5am"},{"type":"text","value":" is initialized with the dataset and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BZ3WuUGy7s"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YhH5wHsZOg"},{"type":"text","value":" parameter. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"THAhYUTq9d"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xRSeyAK5ex"},{"type":"text","value":" specifies the size of the batches along each dimension. In this case, we are creating batches of size 10x10 along the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"owTrjhrJNR"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Km11uE9oLj"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YnZjGpfSkg"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Bn8Ogmj9SS"},{"type":"text","value":" dimensions. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uDK9EtKvuK"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QH7WKhPjOK"},{"type":"text","value":" dimension is not specified, so ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Zn2VgkyfKz"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mJpD2ACF3N"},{"type":"text","value":" will yield batches that include all time steps.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ruW3U63tpJ"}],"key":"wb3yoqH33M"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s inspect the first batch generated.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BHoffnWDrD"}],"key":"EyADfN9RKY"}],"key":"XllqHIxfK2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"first_batch = next(iter(bgen))\nfirst_batch","key":"rnBUzWQfw4"},{"type":"output","id":"ytUOvuifOactisHsS6GOX","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.8718 0.4989 ... 0.4266 0.09814\n    precipitation  (x, y, time) float64 40kB 0.5097 0.386 ... 0.61 0.09556","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.8718 0.4989 ... 0.4266 0.09814\n    precipitation  (x, y, time) float64 40kB 0.5097 0.386 ... 0.61 0.09556</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-fa1aff94-33fa-4798-a8cd-5ed8ebb0cd6a' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-fa1aff94-33fa-4798-a8cd-5ed8ebb0cd6a' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-44cc9f59-8deb-4fb4-8e47-eacd2364aea7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-44cc9f59-8deb-4fb4-8e47-eacd2364aea7' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-d4adc006-08c3-496e-b591-4111fd3a9ec4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d4adc006-08c3-496e-b591-4111fd3a9ec4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8cfa424a-3609-47ee-b4d0-b530402337af' class='xr-var-data-in' type='checkbox'><label for='data-8cfa424a-3609-47ee-b4d0-b530402337af' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-8dc667d1-a8c5-4195-836c-5695e7fb0b1f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8dc667d1-a8c5-4195-836c-5695e7fb0b1f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dd29bcc0-ff38-4371-ac92-2b4f18314686' class='xr-var-data-in' type='checkbox'><label for='data-dd29bcc0-ff38-4371-ac92-2b4f18314686' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-cc6ad1e1-03fc-4530-90f3-768c09fd10ec' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cc6ad1e1-03fc-4530-90f3-768c09fd10ec' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e6809df6-8df3-4610-8074-67cc34fb22ef' class='xr-var-data-in' type='checkbox'><label for='data-e6809df6-8df3-4610-8074-67cc34fb22ef' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bbf6e24d-eb20-4320-b532-821927ed0ab7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-bbf6e24d-eb20-4320-b532-821927ed0ab7' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.8718 0.4989 ... 0.4266 0.09814</div><input id='attrs-550b46f8-2b8d-4212-9dbd-ba6d7bed30f9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-550b46f8-2b8d-4212-9dbd-ba6d7bed30f9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2cbb0079-4e73-4b0e-b866-218000547908' class='xr-var-data-in' type='checkbox'><label for='data-2cbb0079-4e73-4b0e-b866-218000547908' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[8.71773821e-01, 4.98874863e-01, 4.27672130e-03, ...,\n         1.74218461e-01, 7.48960373e-01, 3.57062059e-01],\n        [2.76307340e-01, 7.31071208e-01, 2.65992968e-01, ...,\n         8.24580509e-01, 6.60601080e-01, 7.04215620e-01],\n        [6.27876360e-01, 1.65943019e-01, 4.83652474e-01, ...,\n         3.78754614e-01, 1.33751947e-01, 6.51772197e-01],\n        ...,\n        [9.35877940e-01, 3.76717453e-01, 6.04392116e-01, ...,\n         3.78047948e-01, 2.63167293e-01, 5.73387794e-01],\n        [5.81266301e-01, 6.85814625e-01, 8.83544195e-01, ...,\n         8.42776890e-01, 4.68464367e-01, 5.02787852e-01],\n        [5.07828762e-01, 4.09276457e-01, 3.44286108e-01, ...,\n         3.15103295e-01, 3.19181766e-01, 7.07167128e-01]],\n\n       [[6.63938985e-01, 6.13395517e-01, 3.74130370e-01, ...,\n         9.19889379e-01, 6.63570718e-01, 5.64805436e-01],\n        [8.56267875e-01, 8.28481317e-01, 8.67098563e-01, ...,\n         2.70652801e-02, 8.71791412e-01, 1.54738423e-01],\n        [2.04113430e-01, 1.00424934e-01, 6.51842824e-01, ...,\n         7.23401116e-01, 9.62744512e-01, 8.47943809e-01],\n...\n         5.91452737e-02, 2.40944102e-01, 1.53014249e-01],\n        [5.00190809e-01, 2.10478472e-01, 4.98448465e-01, ...,\n         1.35024610e-01, 2.70952357e-01, 1.89417737e-01],\n        [4.58619180e-01, 4.72086718e-01, 3.19528581e-01, ...,\n         5.85613735e-01, 9.41093422e-01, 3.31036436e-01]],\n\n       [[8.06664840e-01, 1.97602554e-02, 3.92822188e-01, ...,\n         6.31181364e-01, 2.61029972e-01, 6.04293735e-01],\n        [8.81302148e-01, 1.15267050e-01, 4.31414253e-01, ...,\n         7.15477148e-01, 4.78293132e-01, 3.87621496e-01],\n        [5.66588854e-01, 3.23045450e-01, 7.56475641e-01, ...,\n         5.49059452e-01, 3.37918159e-02, 4.59717594e-01],\n        ...,\n        [1.75505933e-01, 3.69934753e-01, 1.37781727e-01, ...,\n         8.61988654e-01, 9.58421495e-03, 9.81419751e-01],\n        [1.78439948e-01, 2.55160588e-01, 1.16254456e-01, ...,\n         1.27398014e-01, 4.62383847e-01, 5.09668886e-01],\n        [3.38770789e-01, 3.54946869e-01, 5.91932927e-01, ...,\n         4.31263058e-01, 4.26577262e-01, 9.81446241e-02]]],\n      shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.5097 0.386 ... 0.61 0.09556</div><input id='attrs-837ce7cd-be40-4964-8d5d-4862682909e9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-837ce7cd-be40-4964-8d5d-4862682909e9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c34ca8fd-9622-42fe-8711-7f4b5ccb9576' class='xr-var-data-in' type='checkbox'><label for='data-c34ca8fd-9622-42fe-8711-7f4b5ccb9576' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.50965876, 0.38598224, 0.08719731, ..., 0.49739082,\n         0.53439086, 0.81741891],\n        [0.97615091, 0.58620182, 0.71847458, ..., 0.47277039,\n         0.99156918, 0.9115682 ],\n        [0.87118306, 0.56945869, 0.43337612, ..., 0.37334417,\n         0.04295212, 0.08760951],\n        ...,\n        [0.76497407, 0.62489441, 0.57179993, ..., 0.80918949,\n         0.36440306, 0.12549753],\n        [0.97245972, 0.14303024, 0.7190376 , ..., 0.67648527,\n         0.71641669, 0.94422375],\n        [0.88851216, 0.84828247, 0.01463277, ..., 0.90837758,\n         0.49867422, 0.00510858]],\n\n       [[0.53588968, 0.43417583, 0.3390482 , ..., 0.58503248,\n         0.34426976, 0.02164465],\n        [0.62018817, 0.07952304, 0.24685818, ..., 0.91478476,\n         0.87987382, 0.94762858],\n        [0.04078154, 0.51954566, 0.65078528, ..., 0.08862355,\n         0.98100073, 0.43553466],\n...\n        [0.46744456, 0.65214006, 0.84060409, ..., 0.64250569,\n         0.80576595, 0.27788461],\n        [0.11158072, 0.90717113, 0.44767833, ..., 0.91215466,\n         0.50513801, 0.01353258],\n        [0.7283106 , 0.83486509, 0.00119938, ..., 0.98156719,\n         0.67209469, 0.90955531]],\n\n       [[0.00632242, 0.15695402, 0.26278567, ..., 0.25462627,\n         0.64367983, 0.05680602],\n        [0.74506929, 0.40022154, 0.09107626, ..., 0.32084315,\n         0.14411173, 0.16407095],\n        [0.22147595, 0.07799094, 0.48413572, ..., 0.63784892,\n         0.45015991, 0.90067639],\n        ...,\n        [0.86731618, 0.65938823, 0.71278652, ..., 0.51492841,\n         0.19510025, 0.52146037],\n        [0.18098493, 0.80798516, 0.97579956, ..., 0.92825051,\n         0.1753052 , 0.3170918 ],\n        [0.34637447, 0.24232318, 0.51224554, ..., 0.40590803,\n         0.61002146, 0.09555657]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-21976da9-bd02-469a-9de0-fc074bb90e4e' class='xr-section-summary-in' type='checkbox'  ><label for='section-21976da9-bd02-469a-9de0-fc074bb90e4e' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-25b760b6-f48d-402d-b082-982583137f21' class='xr-index-data-in' type='checkbox'/><label for='index-25b760b6-f48d-402d-b082-982583137f21' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-ff7b4c36-2461-40cc-820c-28a447e44330' class='xr-index-data-in' type='checkbox'/><label for='index-ff7b4c36-2461-40cc-820c-28a447e44330' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-b8eb5476-64b6-4789-89e7-34f67e2b7065' class='xr-index-data-in' type='checkbox'/><label for='index-b8eb5476-64b6-4789-89e7-34f67e2b7065' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-be5427dc-e1bc-4711-b356-e41810039f4d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-be5427dc-e1bc-4711-b356-e41810039f4d' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"XHtB41hhKY"}],"key":"uVx8qFEMn9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"comment","value":" Horizontal lines ","key":"x4aoeEtLEb"},{"type":"comment","value":" Vertical lines ","key":"HfubwiQOwY"},{"type":"comment","value":" Colored Rectangle ","key":"BZkskBsU12"},{"type":"comment","value":" Horizontal lines ","key":"wPI4Tg4QtW"},{"type":"comment","value":" Vertical lines ","key":"l7OSdWTywd"},{"type":"comment","value":" Colored Rectangle ","key":"I1o09EQEws"},{"type":"comment","value":" Horizontal lines ","key":"m7nyWudkVs"},{"type":"comment","value":" Vertical lines ","key":"tIEqj3YRRC"},{"type":"comment","value":" Colored Rectangle ","key":"HLmWZwbsay"},{"type":"comment","value":" Text ","key":"YWiHUneFd7"}],"key":"vVOSIfCSky"}],"key":"IPEF4CnIGm"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The first batch has dimensions ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qRDoXyq5by"},{"type":"inlineCode","value":"x=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GZDPlRZyif"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RbDz0k23q2"},{"type":"inlineCode","value":"y=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yJ9hr48ylm"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H1Y94ZRlKU"},{"type":"inlineCode","value":"time=50","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XztO0729qJ"},{"type":"text","value":", as expected. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zmmSGv8lDu"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GQGdXKFSx3"},{"type":"text","value":" will yield 100 batches in total (10 batches in the x-direction * 10 batches in the y-direction).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xxmoOL0jGZ"}],"key":"HMVYRVQTRc"}],"key":"nJiCcR3WO6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"The BatchGenerator contains {len(bgen)} batches.\")","key":"hrhwgo00Wc"},{"type":"output","id":"FneZdwQn1sBMLAK105o57","data":[{"output_type":"stream","name":"stdout","text":"The BatchGenerator contains 100 batches.\n"}],"key":"DNC0y5gsCJ"}],"key":"XOTiYFeB2U"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overlapping Batches with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tl2KqPbUZi"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F3s48X6hjh"}],"identifier":"overlapping-batches-with-input-overlap","label":"Overlapping Batches with input_overlap","html_id":"overlapping-batches-with-input-overlap","implicit":true,"key":"trLZWpcjVw"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In many applications, it is useful to have overlapping batches to provide context from neighboring data points. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"j19Wnmvj1v"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kT9xschlnq"},{"type":"text","value":" parameter allows for this.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dp315eoZ91"}],"key":"C1LQ9kBDS8"}],"key":"ppo8uhKEaU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen_overlap = xbatcher.BatchGenerator(\n    ds, \n    input_dims={\"x\": 10, \"y\": 10}, \n    input_overlap={\"x\": 2, \"y\": 2}\n)\nfirst_batch_overlap = next(iter(bgen_overlap))\nfirst_batch_overlap","key":"lZ1DHxzLDn"},{"type":"output","id":"RgGbeGCLrXRoQe97-yPqP","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.8718 0.4989 ... 0.4266 0.09814\n    precipitation  (x, y, time) float64 40kB 0.5097 0.386 ... 0.61 0.09556","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.8718 0.4989 ... 0.4266 0.09814\n    precipitation  (x, y, time) float64 40kB 0.5097 0.386 ... 0.61 0.09556</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-a721ef51-100c-47db-b479-7ffc7fc6ba52' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-a721ef51-100c-47db-b479-7ffc7fc6ba52' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-7544c0b4-84cd-4d02-83b7-1adda30dd11f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7544c0b4-84cd-4d02-83b7-1adda30dd11f' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-00be59cd-a2ee-4d90-a5cc-654bca9fa6dc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-00be59cd-a2ee-4d90-a5cc-654bca9fa6dc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-aa801b5d-27ba-4ab5-a50a-3a9ac74ca528' class='xr-var-data-in' type='checkbox'><label for='data-aa801b5d-27ba-4ab5-a50a-3a9ac74ca528' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-d633d4b9-06ee-40c1-9e30-fcb0fb0db649' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d633d4b9-06ee-40c1-9e30-fcb0fb0db649' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a0ed7adc-47a9-4203-ac0d-95ccb031b73d' class='xr-var-data-in' type='checkbox'><label for='data-a0ed7adc-47a9-4203-ac0d-95ccb031b73d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-d82c9d30-889d-4de2-a257-0e0e950334e9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d82c9d30-889d-4de2-a257-0e0e950334e9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c84243e7-6ce6-4c28-b7b0-af233d90da52' class='xr-var-data-in' type='checkbox'><label for='data-c84243e7-6ce6-4c28-b7b0-af233d90da52' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c46f6215-3dc8-4ae8-ac0a-1d11e6bcb41f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c46f6215-3dc8-4ae8-ac0a-1d11e6bcb41f' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.8718 0.4989 ... 0.4266 0.09814</div><input id='attrs-729fc1eb-3650-4770-b1b4-dc5b89f41f16' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-729fc1eb-3650-4770-b1b4-dc5b89f41f16' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-589333d3-881d-4ebb-b64e-84403708e472' class='xr-var-data-in' type='checkbox'><label for='data-589333d3-881d-4ebb-b64e-84403708e472' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[8.71773821e-01, 4.98874863e-01, 4.27672130e-03, ...,\n         1.74218461e-01, 7.48960373e-01, 3.57062059e-01],\n        [2.76307340e-01, 7.31071208e-01, 2.65992968e-01, ...,\n         8.24580509e-01, 6.60601080e-01, 7.04215620e-01],\n        [6.27876360e-01, 1.65943019e-01, 4.83652474e-01, ...,\n         3.78754614e-01, 1.33751947e-01, 6.51772197e-01],\n        ...,\n        [9.35877940e-01, 3.76717453e-01, 6.04392116e-01, ...,\n         3.78047948e-01, 2.63167293e-01, 5.73387794e-01],\n        [5.81266301e-01, 6.85814625e-01, 8.83544195e-01, ...,\n         8.42776890e-01, 4.68464367e-01, 5.02787852e-01],\n        [5.07828762e-01, 4.09276457e-01, 3.44286108e-01, ...,\n         3.15103295e-01, 3.19181766e-01, 7.07167128e-01]],\n\n       [[6.63938985e-01, 6.13395517e-01, 3.74130370e-01, ...,\n         9.19889379e-01, 6.63570718e-01, 5.64805436e-01],\n        [8.56267875e-01, 8.28481317e-01, 8.67098563e-01, ...,\n         2.70652801e-02, 8.71791412e-01, 1.54738423e-01],\n        [2.04113430e-01, 1.00424934e-01, 6.51842824e-01, ...,\n         7.23401116e-01, 9.62744512e-01, 8.47943809e-01],\n...\n         5.91452737e-02, 2.40944102e-01, 1.53014249e-01],\n        [5.00190809e-01, 2.10478472e-01, 4.98448465e-01, ...,\n         1.35024610e-01, 2.70952357e-01, 1.89417737e-01],\n        [4.58619180e-01, 4.72086718e-01, 3.19528581e-01, ...,\n         5.85613735e-01, 9.41093422e-01, 3.31036436e-01]],\n\n       [[8.06664840e-01, 1.97602554e-02, 3.92822188e-01, ...,\n         6.31181364e-01, 2.61029972e-01, 6.04293735e-01],\n        [8.81302148e-01, 1.15267050e-01, 4.31414253e-01, ...,\n         7.15477148e-01, 4.78293132e-01, 3.87621496e-01],\n        [5.66588854e-01, 3.23045450e-01, 7.56475641e-01, ...,\n         5.49059452e-01, 3.37918159e-02, 4.59717594e-01],\n        ...,\n        [1.75505933e-01, 3.69934753e-01, 1.37781727e-01, ...,\n         8.61988654e-01, 9.58421495e-03, 9.81419751e-01],\n        [1.78439948e-01, 2.55160588e-01, 1.16254456e-01, ...,\n         1.27398014e-01, 4.62383847e-01, 5.09668886e-01],\n        [3.38770789e-01, 3.54946869e-01, 5.91932927e-01, ...,\n         4.31263058e-01, 4.26577262e-01, 9.81446241e-02]]],\n      shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.5097 0.386 ... 0.61 0.09556</div><input id='attrs-5a307362-6768-4827-a09b-0e0eab9dbcb8' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5a307362-6768-4827-a09b-0e0eab9dbcb8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1464f6ee-0e12-45d6-897f-75d42089f698' class='xr-var-data-in' type='checkbox'><label for='data-1464f6ee-0e12-45d6-897f-75d42089f698' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.50965876, 0.38598224, 0.08719731, ..., 0.49739082,\n         0.53439086, 0.81741891],\n        [0.97615091, 0.58620182, 0.71847458, ..., 0.47277039,\n         0.99156918, 0.9115682 ],\n        [0.87118306, 0.56945869, 0.43337612, ..., 0.37334417,\n         0.04295212, 0.08760951],\n        ...,\n        [0.76497407, 0.62489441, 0.57179993, ..., 0.80918949,\n         0.36440306, 0.12549753],\n        [0.97245972, 0.14303024, 0.7190376 , ..., 0.67648527,\n         0.71641669, 0.94422375],\n        [0.88851216, 0.84828247, 0.01463277, ..., 0.90837758,\n         0.49867422, 0.00510858]],\n\n       [[0.53588968, 0.43417583, 0.3390482 , ..., 0.58503248,\n         0.34426976, 0.02164465],\n        [0.62018817, 0.07952304, 0.24685818, ..., 0.91478476,\n         0.87987382, 0.94762858],\n        [0.04078154, 0.51954566, 0.65078528, ..., 0.08862355,\n         0.98100073, 0.43553466],\n...\n        [0.46744456, 0.65214006, 0.84060409, ..., 0.64250569,\n         0.80576595, 0.27788461],\n        [0.11158072, 0.90717113, 0.44767833, ..., 0.91215466,\n         0.50513801, 0.01353258],\n        [0.7283106 , 0.83486509, 0.00119938, ..., 0.98156719,\n         0.67209469, 0.90955531]],\n\n       [[0.00632242, 0.15695402, 0.26278567, ..., 0.25462627,\n         0.64367983, 0.05680602],\n        [0.74506929, 0.40022154, 0.09107626, ..., 0.32084315,\n         0.14411173, 0.16407095],\n        [0.22147595, 0.07799094, 0.48413572, ..., 0.63784892,\n         0.45015991, 0.90067639],\n        ...,\n        [0.86731618, 0.65938823, 0.71278652, ..., 0.51492841,\n         0.19510025, 0.52146037],\n        [0.18098493, 0.80798516, 0.97579956, ..., 0.92825051,\n         0.1753052 , 0.3170918 ],\n        [0.34637447, 0.24232318, 0.51224554, ..., 0.40590803,\n         0.61002146, 0.09555657]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1f6f51bc-6d38-447f-8cc9-583583c08c47' class='xr-section-summary-in' type='checkbox'  ><label for='section-1f6f51bc-6d38-447f-8cc9-583583c08c47' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-bc1cffab-8d46-43a3-a7e9-48e651c747e9' class='xr-index-data-in' type='checkbox'/><label for='index-bc1cffab-8d46-43a3-a7e9-48e651c747e9' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-6bbadc1a-3b73-4793-a5b7-4c0c49e21edf' class='xr-index-data-in' type='checkbox'/><label for='index-6bbadc1a-3b73-4793-a5b7-4c0c49e21edf' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-9d6db538-6eb5-4e13-9e93-0d4848c0f4ad' class='xr-index-data-in' type='checkbox'/><label for='index-9d6db538-6eb5-4e13-9e93-0d4848c0f4ad' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-929233d9-d1f1-4d60-b817-665359c870ee' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-929233d9-d1f1-4d60-b817-665359c870ee' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"MgAkiwlQNP"}],"key":"Ue7pBWUSBB"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e0QDc2tsab"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"txYYsDOSQ2"},{"type":"text","value":" parameter specifies the number of elements to overlap between consecutive batches. The size of the batches themselves does not change. Let’s verify this by inspecting the coordinates of the first two batches.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Q6fi5g1YwL"}],"key":"q4lPhUwqXK"}],"key":"dMtkAzeLdt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"Batch 1 y-coords: {bgen_overlap[0].y.values}, Batch 1 x-coords: {bgen_overlap[0].x.values}\")\nprint(f\"Batch 2 y-coords: {bgen_overlap[1].y.values}, Batch 2 x-coords: {bgen_overlap[1].x.values}\")\nprint(f\"Batch 3 y-coords: {bgen_overlap[2].y.values}, Batch 3 x-coords: {bgen_overlap[2].x.values}\")\nprint(f\"Batch 13 y-coords: {bgen_overlap[12].y.values}, Batch 13 x-coords: {bgen_overlap[12].x.values}\")\nprint(f\"Batch 14 y-coords: {bgen_overlap[13].y.values}, Batch 11 x-coords: {bgen_overlap[13].x.values}\")","key":"fEMTE793QD"},{"type":"output","id":"l9Uw2EKHocS38-E3xvAcT","data":[{"output_type":"stream","name":"stdout","text":"Batch 1 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 1 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 2 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 2 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 3 y-coords: [16 17 18 19 20 21 22 23 24 25], Batch 3 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 13 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 13 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\nBatch 14 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 11 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\n"}],"key":"EfcNY3o6uU"}],"key":"OkII5GHq5g"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As you can see, the second batch starts at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jMuOuyALZ8"},{"type":"inlineCode","value":"y=8","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zDFjuR1yK3"},{"type":"text","value":", which is an overlap of 2 elements with the first batch, which ends at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rf5IwPlAGr"},{"type":"inlineCode","value":"y=9","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hHivKQJBY6"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rKYgBi9EFV"}],"key":"Ghvwd7UcFJ"}],"key":"t8OTiG4eom"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Integration with PyTorch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ahD0x2v4th"}],"identifier":"integration-with-pytorch","label":"Integration with PyTorch","html_id":"integration-with-pytorch","implicit":true,"key":"P6eHD8nmFF"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lemIgAS10z"},{"type":"text","value":" provides ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kJUTtwRTpM"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lZH2wsD1Cu"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"k5EiLIE7fe"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Cml2oLLD6h"},{"type":"text","value":" to wrap the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wkTmkSZk7v"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UHA9Jv5wTk"},{"type":"text","value":" for use with PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"byhXx0Vh6m"}],"key":"hLTZbSTdex"}],"key":"KgfIxoLRzI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"He43H8KWKB"},{"type":"text","value":" vs. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fCwjFK04Ys"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WTVX8JNxg9"}],"identifier":"mapdataset-vs-iterabledataset","label":"MapDataset vs. IterableDataset","html_id":"mapdataset-vs-iterabledataset","implicit":true,"key":"iaxJkdc6n4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rAfTHVrHvp"},{"type":"text","value":": Implements ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dZjdXjw8PE"},{"type":"inlineCode","value":"__getitem__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CXBq3bNNYp"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Egvi3FQROY"},{"type":"inlineCode","value":"__len__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bB3I2uzrhU"},{"type":"text","value":", allowing for random access to data samples. This is the most common type of dataset in PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"swg2s7z4Wt"}],"key":"A91rnpzqCq"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"HxB3Mydhn6"},{"type":"text","value":": Implements ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FEfBXb0IWf"},{"type":"inlineCode","value":"__iter__","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"HcbxyPGetK"},{"type":"text","value":", and is suitable for very large datasets that may not fit into memory, as it streams data.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"a3wiG7rezR"}],"key":"mRXRX4auko"}],"key":"RypEP8a0Si"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We will use ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"eM8scZA2mB"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"NCYJZKsXZY"},{"type":"text","value":" for this example.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"A0YpFLVWYV"}],"key":"lcw4zTrQTV"}],"key":"DXe4VBvZcA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen[0].temperature.shape\nbgen[0].precipitation.shape","key":"k5b8JsuBsf"},{"type":"output","id":"u2-oCkZHDzhvCUKmadv_W","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"(10, 10, 50)","content_type":"text/plain"}}}],"key":"uEzRQZw3Bd"}],"key":"x2Yyh9OhAa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def patch_to_tensor(patch):\n    temp_patch = torch.tensor(patch.temperature.data)\n    prcp_patch = torch.tensor(patch.precipitation.data)\n    stacked_patch = torch.stack((temp_patch, prcp_patch), dim=0)\n    patch = stacked_patch\n    patch = torch.nan_to_num(patch)\n    # patch = torch.unsqueeze(patch, 0)\n    patch = patch.float()\n    return patch\n\nmap_ds = MapDataset(bgen, transform=patch_to_tensor)","key":"mT9Go0yR7W"},{"type":"output","id":"0fveAIbdCVooAE8EOXs_i","data":[],"key":"ooRsU9OXIQ"}],"key":"DJFP4XwoNS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bT62QO9fTK"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KZUVpJAcQb"},{"type":"text","value":" can then be used with a PyTorch ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ro9Fv5XVhV"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sqnQHhTqIa"},{"type":"text","value":", which provides utilities for shuffling, batching, and multiprocessing.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J0UidHNZEk"}],"key":"pMMLH8nszL"}],"key":"qnPhA1xCnv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dataloader = torch.utils.data.DataLoader(map_ds, batch_size=4)","key":"K6FISbKjvA"},{"type":"output","id":"EzDY-zop9bVtLCXVICjRA","data":[],"key":"qVdpUDIWhx"}],"key":"qThhQmtdC1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspecting a batch from the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wnNxcczq4O"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DZIK175ArK"},{"type":"text","value":" reveals a batch of PyTorch tensors.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Mztv2qJW1t"}],"key":"BCmfAx2xt0"}],"key":"t7Tta5km2S"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"torch_batch = next(iter(dataloader))\ntorch_batch.shape","key":"i0doTIT2FK"},{"type":"output","id":"F0q53iXWxjKzjYSYxHzgt","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"torch.Size([4, 2, 10, 10, 50])","content_type":"text/plain"}}}],"key":"udJheuCBDJ"}],"key":"YFJfZ9mCc3"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dmtiqUuLSi"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BXAJXFTNL5"},{"type":"text","value":" has stacked 4 of the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PKtpwStcQV"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fPikFtwPWJ"},{"type":"text","value":" batches, creating a new ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VkRVxrxGW1"},{"type":"inlineCode","value":"batch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZOx9nkHr2T"},{"type":"text","value":" dimension of size 4. The data is now ready for use in a PyTorch model.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xsunmtoa82"}],"key":"v6XvOHEV74"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the next notebook, we will explore how to reconstruct an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aV6aln4JIO"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hRGIChBAoS"},{"type":"text","value":" from a model’s output.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mJw0LCT1oK"}],"key":"JFM6sC4bER"}],"key":"WsrPLqmx7p"}],"key":"SFSFSnaUuD"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Reconstructing Xarray Datasets from Model Outputs","url":"/notebooks/xbatcher-reconstruction","group":"Xbatcher fundamentals"}}},"domain":"http://localhost:3000"}