{"version":2,"kind":"Notebook","sha256":"8c261d3526feaeb655df76ba46b5d7c5c44c390bfc879accc65bf523d03475a8","slug":"notebooks.xbatcher-dataloading","location":"/notebooks/xbatcher_dataloading.ipynb","dependencies":[],"frontmatter":{"title":"Loading Batches from Xarray Objects","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"cookbook-dev","language":"python"},"authors":[{"nameParsed":{"literal":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","given":"and The Project Pythia Community","family":"Keenan Ganz","suffix":"Nabin Kalauni"},"name":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/xbatcher-deep-learning","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/xbatcher-deep-learning/blob/main/notebooks/xbatcher_dataloading.ipynb","exports":[{"format":"ipynb","filename":"xbatcher_dataloading.ipynb","url":"/xbatcher-deep-learning/build/xbatcher_dataloading-934942f5e23d10d323d900d7d2db2834.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZzYpCozSdn"}],"key":"LC9PckRAli"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rRbcx8DZ4n"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"vAf5HU24qp"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Working with large, multi-dimensional datasets, common in fields like climate science and oceanography, presents a significant challenge when preparing data for machine learning models. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UhwW09ykea"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OaIp8dBHHV"},{"type":"text","value":" library is designed to simplify this preprocessing step by serving as a bridge between the labeled, multi-dimensional data structures of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"viPTTBIDfr"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fpMLOxeoFS"},{"type":"text","value":" and the tensor-based inputs required by deep learning frameworks such as PyTorch and TensorFlow.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IiFrwinvND"}],"key":"KAut4YN1MT"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This guide provides an introduction to the fundamentals of ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hIMJb7d6R8"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fua09ohhSk"},{"type":"text","value":". We will cover how to create a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FtMjTRdhG4"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ir1x99Ow57"},{"type":"text","value":", customize it for specific needs, and prepare the resulting data for integration with a PyTorch model.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IB5j9ZMkeW"}],"key":"NTiGOGcGYt"},{"type":"heading","depth":2,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JeTd4hccFr"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"RAo4IuMlR2"},{"type":"table","position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qiirTu9JiZ"}],"key":"ptMzmerfIb"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"nyRYCB5cdE"}],"key":"eQs8Vh6DqT"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"jkXW4pGCm1"}],"key":"jkW2mRA3bS"}],"key":"OUQRgbLauk"},{"type":"tableRow","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Intro to Xarray","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"aIf0sJkn0p"}],"urlSource":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","key":"vVO83jVGq8"}],"key":"Xb97A5B1OK"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"h6UoGPBRY8"}],"key":"Q477hxSLzX"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Array indexing","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KydaAqwVyn"}],"key":"l6CJhEPvWb"}],"key":"NkDxYRKoRd"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Datasets and DataLoaders","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"mfSzeqJbg8"}],"urlSource":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","key":"zRMKaCgNIf"}],"key":"YCUe9Pr0YP"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"rZXYmXwhnS"}],"key":"AXNRIU0aKd"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Batching data","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"KcoLHMlfjO"}],"key":"G59HKYA1NB"}],"key":"aKHhpyipba"}],"key":"mQ96pv2RZ8"}],"key":"yKMkRHpo7M"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F6Rccwer34"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"qQKKzD0ZTn"}],"key":"IdQVIbEApS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport torch\nimport xbatcher\nfrom xbatcher.loaders.torch import MapDataset, IterableDataset","key":"WcwszfFlwi"},{"type":"output","id":"bnN0CTUVqSU4Zgv9LI25o","data":[],"key":"xG7HaZ9fik"}],"key":"SYHR51Uzg5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating a Sample Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GaXocmudKC"}],"identifier":"creating-a-sample-dataset","label":"Creating a Sample Dataset","html_id":"creating-a-sample-dataset","implicit":true,"key":"o0drGWr3MT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To begin, we will create a sample ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JtNrmzYKoq"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sIQ2NfGvtz"},{"type":"text","value":". This allows us to focus on the mechanics of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wOHRErtB9P"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dR2O4oxNwO"},{"type":"text","value":" without the overhead of a specific real-world dataset. This sample can be replaced by any ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lcAsNbO7ov"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HnICRkEUAA"},{"type":"text","value":" loaded from a file (e.g., NetCDF, Zarr).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YOPR9hKiHV"}],"key":"AoLrS5kCu1"}],"key":"HpyFn6p21G"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds = xr.Dataset(\n    {\n        \"temperature\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n        \"precipitation\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n    },\n    coords={\n        \"x\": np.arange(100),\n        \"y\": np.arange(100),\n        \"time\": np.arange(50),\n    },\n)\nds","key":"kIhVkW6r1T"},{"type":"output","id":"hXnMvgTsvm_XxyC1DU0vP","data":[{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.6278 0.1243 ... 0.2301 0.8977\n    precipitation  (x, y, time) float64 4MB 0.6819 0.3036 ... 0.4743 0.1601","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.6278 0.1243 ... 0.2301 0.8977\n    precipitation  (x, y, time) float64 4MB 0.6819 0.3036 ... 0.4743 0.1601</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-508554b2-198e-4db1-ace1-778e9ca56623' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-508554b2-198e-4db1-ace1-778e9ca56623' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 100</li><li><span class='xr-has-index'>y</span>: 100</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-fc2acb63-8ada-4e7f-849e-51cfc7ea9333' class='xr-section-summary-in' type='checkbox'  checked><label for='section-fc2acb63-8ada-4e7f-849e-51cfc7ea9333' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-37d54c7e-627b-44d3-abe6-318946a3b805' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-37d54c7e-627b-44d3-abe6-318946a3b805' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b09ef7fb-55f5-48a8-b0c0-51b5370ba624' class='xr-var-data-in' type='checkbox'><label for='data-b09ef7fb-55f5-48a8-b0c0-51b5370ba624' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-1bccee87-3f9d-4741-bd27-4cb88f7383dd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1bccee87-3f9d-4741-bd27-4cb88f7383dd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5cb62933-6b50-40ee-a779-3816c2336151' class='xr-var-data-in' type='checkbox'><label for='data-5cb62933-6b50-40ee-a779-3816c2336151' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-b71ec77a-da9c-48f7-90e0-a8d689bcbbab' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b71ec77a-da9c-48f7-90e0-a8d689bcbbab' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4ff4a6dd-3cb3-432b-bb9d-5c5ba6146d88' class='xr-var-data-in' type='checkbox'><label for='data-4ff4a6dd-3cb3-432b-bb9d-5c5ba6146d88' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-93ec1b4e-b040-49e1-bf3a-275ae8876d04' class='xr-section-summary-in' type='checkbox'  checked><label for='section-93ec1b4e-b040-49e1-bf3a-275ae8876d04' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6278 0.1243 ... 0.2301 0.8977</div><input id='attrs-f9e45df2-688b-48fe-87a1-45186f8c3c43' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f9e45df2-688b-48fe-87a1-45186f8c3c43' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-81e1b0a9-62b6-4342-8f7f-d1ab823bb688' class='xr-var-data-in' type='checkbox'><label for='data-81e1b0a9-62b6-4342-8f7f-d1ab823bb688' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[6.27767441e-01, 1.24335516e-01, 2.73319322e-03, ...,\n         8.31164990e-02, 9.87926896e-01, 1.46707134e-01],\n        [3.37071610e-01, 3.96090526e-01, 1.04070557e-01, ...,\n         3.51741003e-01, 1.74320332e-01, 2.97829456e-01],\n        [8.78372557e-01, 9.37322640e-01, 8.63543102e-01, ...,\n         1.75845895e-01, 4.48677016e-02, 8.59184517e-01],\n        ...,\n        [3.82261224e-02, 2.35290900e-01, 1.84099843e-01, ...,\n         5.93297161e-01, 3.60805933e-01, 3.16650191e-01],\n        [8.90646116e-01, 8.13529536e-01, 1.63425993e-01, ...,\n         1.10976005e-01, 5.90115496e-01, 4.25910679e-01],\n        [3.24865425e-01, 9.26040475e-01, 1.45271973e-01, ...,\n         6.65912231e-01, 2.13558841e-01, 1.83795538e-01]],\n\n       [[6.27367549e-01, 3.50592567e-01, 2.67596267e-01, ...,\n         9.33747233e-01, 4.19914646e-02, 6.23536503e-02],\n        [5.99590255e-01, 8.39422489e-01, 4.36373465e-01, ...,\n         7.01431618e-01, 8.74327148e-02, 9.41625527e-01],\n        [4.10594022e-01, 6.44006872e-01, 7.37745684e-01, ...,\n         9.70373511e-02, 5.65935588e-01, 1.16306943e-01],\n...\n         5.93852634e-01, 2.61711080e-01, 5.06513084e-01],\n        [9.90823081e-01, 8.93692212e-01, 5.75794782e-01, ...,\n         4.37221352e-01, 2.22424791e-01, 3.11386206e-01],\n        [1.66728179e-01, 1.13210736e-01, 2.34287095e-02, ...,\n         2.48441574e-02, 2.57529448e-01, 4.07191146e-01]],\n\n       [[5.83838442e-01, 8.78257520e-01, 4.49894931e-01, ...,\n         7.47213463e-01, 4.56192797e-01, 3.48576098e-02],\n        [5.76305307e-01, 2.44500163e-01, 3.65637596e-01, ...,\n         2.34172032e-01, 8.46972995e-01, 7.41602052e-01],\n        [4.28480757e-01, 8.11923581e-01, 6.59396286e-01, ...,\n         4.34270528e-01, 3.49954554e-01, 7.61756529e-01],\n        ...,\n        [1.15636752e-01, 2.14658468e-01, 3.68884170e-01, ...,\n         6.36557473e-01, 9.09938323e-01, 3.14838682e-01],\n        [9.67689452e-01, 7.13378923e-01, 6.24661586e-01, ...,\n         8.22811608e-01, 4.86718441e-01, 7.95188040e-01],\n        [5.71830310e-01, 6.91256827e-01, 1.56270049e-01, ...,\n         7.57266612e-01, 2.30143270e-01, 8.97671711e-01]]],\n      shape=(100, 100, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6819 0.3036 ... 0.4743 0.1601</div><input id='attrs-f16b9d23-a852-4194-a3a0-fcdb924d6dd5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f16b9d23-a852-4194-a3a0-fcdb924d6dd5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-27cfa40d-b435-408e-95d6-8494780cb9f6' class='xr-var-data-in' type='checkbox'><label for='data-27cfa40d-b435-408e-95d6-8494780cb9f6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.6819084 , 0.30358109, 0.60249987, ..., 0.20771334,\n         0.60657176, 0.48593916],\n        [0.33494552, 0.89970602, 0.42480986, ..., 0.80465496,\n         0.85730216, 0.93839203],\n        [0.57654376, 0.67367647, 0.59650786, ..., 0.1351858 ,\n         0.67556211, 0.9975207 ],\n        ...,\n        [0.5643233 , 0.66312617, 0.34761798, ..., 0.00270759,\n         0.58466674, 0.74242312],\n        [0.78295089, 0.68656667, 0.60320624, ..., 0.25857097,\n         0.38053846, 0.08724442],\n        [0.34889853, 0.58025164, 0.07915322, ..., 0.69510011,\n         0.601836  , 0.18979387]],\n\n       [[0.40105254, 0.61861891, 0.87129445, ..., 0.58300068,\n         0.0675017 , 0.77915598],\n        [0.17655726, 0.59863825, 0.1331099 , ..., 0.04122261,\n         0.62331228, 0.66669276],\n        [0.58077707, 0.93540418, 0.44431524, ..., 0.74310233,\n         0.10515556, 0.53394127],\n...\n        [0.51442405, 0.76182026, 0.22053239, ..., 0.53681845,\n         0.47078991, 0.63726816],\n        [0.96221531, 0.34642072, 0.59399505, ..., 0.74900664,\n         0.5001549 , 0.28754138],\n        [0.85549868, 0.77724183, 0.36414361, ..., 0.99972358,\n         0.45665752, 0.99815101]],\n\n       [[0.49189302, 0.38916256, 0.60330005, ..., 0.00295331,\n         0.4912795 , 0.84368908],\n        [0.55350777, 0.62257363, 0.93092829, ..., 0.82736836,\n         0.51222754, 0.89102394],\n        [0.67705913, 0.15056641, 0.37896891, ..., 0.05354711,\n         0.87089885, 0.08845639],\n        ...,\n        [0.95530965, 0.48437248, 0.23709608, ..., 0.93053355,\n         0.81519234, 0.36628308],\n        [0.534875  , 0.5901412 , 0.32373407, ..., 0.74346744,\n         0.63904151, 0.71731272],\n        [0.30028283, 0.15169781, 0.88015182, ..., 0.36705927,\n         0.47426058, 0.16014598]]], shape=(100, 100, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cce15e4b-a54d-4775-9a88-5d3d10ab12da' class='xr-section-summary-in' type='checkbox'  ><label for='section-cce15e4b-a54d-4775-9a88-5d3d10ab12da' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-baa1cfa9-4dbe-44f0-afa4-c8c25be34296' class='xr-index-data-in' type='checkbox'/><label for='index-baa1cfa9-4dbe-44f0-afa4-c8c25be34296' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-89a1d82f-b0ce-414c-8975-113c111a5101' class='xr-index-data-in' type='checkbox'/><label for='index-89a1d82f-b0ce-414c-8975-113c111a5101' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-02d629bc-bb53-4884-a487-f1490fc4ea17' class='xr-index-data-in' type='checkbox'/><label for='index-02d629bc-bb53-4884-a487-f1490fc4ea17' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-25313126-024a-4171-a0cf-796d37279a37' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-25313126-024a-4171-a0cf-796d37279a37' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"T0msvgnrch"}],"key":"MahS6Kk0Un"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The dataset contains two variables, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"esj4nBFVLt"},{"type":"inlineCode","value":"temperature","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zzP0hKYk3S"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"g4URnbePBo"},{"type":"inlineCode","value":"precipitation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"os8ktrSqWm"},{"type":"text","value":", and three dimensions: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iWw3Y51To0"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"orI7SHEz68"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qqLW2ZDHgt"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nu9BpkCXxD"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wb83EsLnKj"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ETKQssGPGZ"},{"type":"text","value":". We will now use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Z7F3nGGIKF"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Km64Z0xf9i"},{"type":"text","value":" to generate batches from this dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iVoFQWpDjs"}],"key":"leXMauXJt5"}],"key":"Px4qlsN1QD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CKhwh65Kag"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wvV7n6wVqm"}],"identifier":"the-batchgenerator","label":"The BatchGenerator","html_id":"the-batchgenerator","implicit":true,"key":"zAgb1fZKgv"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GBITjHALce"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IA6J9tSBof"},{"type":"text","value":" is the core component of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BBgT53NyCt"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eLcnczzUXo"},{"type":"text","value":". It is a Python generator that yields batches of data from an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JpbyBOtaOg"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WOZapaDI2P"},{"type":"text","value":" object.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uvh1iJxstX"}],"key":"ZteqlXRfkg"}],"key":"Kcg9TiH9Rf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen = xbatcher.BatchGenerator(ds, input_dims={\"x\": 10, \"y\": 10})","key":"fKkjsUZmt3"},{"type":"output","id":"KDmHq3MGnqP3W4hZypwvE","data":[],"key":"nYtQ3wiP0h"}],"key":"TTYTcx49Vh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F1w2kQdCum"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lzA3oHuF6T"},{"type":"text","value":" is initialized with the dataset and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xLOCxXGLqv"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vyWR3U49f6"},{"type":"text","value":" parameter. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DvKFe2GwFB"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HNG9XB9bts"},{"type":"text","value":" specifies the size of the batches along each dimension. In this case, we are creating batches of size 10x10 along the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FrIcTBxyWi"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sxAjGzdM4O"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Sswa5VqrWC"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DCsNp853HA"},{"type":"text","value":" dimensions. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tGZdwHahML"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ONzs4HfAJa"},{"type":"text","value":" dimension is not specified, so ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Q7G2f2sAjf"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"L5bPNLJOTD"},{"type":"text","value":" will yield batches that include all time steps.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"li30z0grKB"}],"key":"CkCcoYzlQs"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s inspect the first batch generated.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vjLsuXQTbO"}],"key":"iArv7dyTQS"}],"key":"pYZpjqaMYq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"first_batch = next(iter(bgen))\nfirst_batch","key":"y5XJHkrDCB"},{"type":"output","id":"A-TLPb6kKVpFWwW6BtNNt","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.6278 0.1243 ... 0.5604 0.9828\n    precipitation  (x, y, time) float64 40kB 0.6819 0.3036 ... 0.8003 0.113","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.6278 0.1243 ... 0.5604 0.9828\n    precipitation  (x, y, time) float64 40kB 0.6819 0.3036 ... 0.8003 0.113</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-905cfd72-0542-4409-aa84-d47090f687df' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-905cfd72-0542-4409-aa84-d47090f687df' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-4a500413-225b-4d1c-8ede-e6da5f3d24f5' class='xr-section-summary-in' type='checkbox'  checked><label for='section-4a500413-225b-4d1c-8ede-e6da5f3d24f5' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-1e667044-40ff-447e-b18f-263304d28b90' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1e667044-40ff-447e-b18f-263304d28b90' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-332563af-6fad-4fa1-8c5b-3861daa53b6e' class='xr-var-data-in' type='checkbox'><label for='data-332563af-6fad-4fa1-8c5b-3861daa53b6e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-beabb300-935d-462f-bdb3-ec3c52263a35' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-beabb300-935d-462f-bdb3-ec3c52263a35' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-05639fab-60cd-4c51-819f-e9756766d1e4' class='xr-var-data-in' type='checkbox'><label for='data-05639fab-60cd-4c51-819f-e9756766d1e4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-11daa0a9-5eab-4690-afae-72e1143eddc1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-11daa0a9-5eab-4690-afae-72e1143eddc1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ec61e686-7ed4-420d-abfe-53604ec2a5b8' class='xr-var-data-in' type='checkbox'><label for='data-ec61e686-7ed4-420d-abfe-53604ec2a5b8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-654ad95b-347a-4e6b-9d16-71812491355c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-654ad95b-347a-4e6b-9d16-71812491355c' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6278 0.1243 ... 0.5604 0.9828</div><input id='attrs-08c66477-825f-45a0-833b-3c90f0272879' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-08c66477-825f-45a0-833b-3c90f0272879' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5e6194b7-a4a4-4758-9814-0d3389179198' class='xr-var-data-in' type='checkbox'><label for='data-5e6194b7-a4a4-4758-9814-0d3389179198' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[6.27767441e-01, 1.24335516e-01, 2.73319322e-03, ...,\n         8.31164990e-02, 9.87926896e-01, 1.46707134e-01],\n        [3.37071610e-01, 3.96090526e-01, 1.04070557e-01, ...,\n         3.51741003e-01, 1.74320332e-01, 2.97829456e-01],\n        [8.78372557e-01, 9.37322640e-01, 8.63543102e-01, ...,\n         1.75845895e-01, 4.48677016e-02, 8.59184517e-01],\n        ...,\n        [8.17024308e-01, 3.95273834e-01, 3.40278453e-01, ...,\n         8.79052301e-01, 7.29642232e-01, 8.29342871e-01],\n        [1.93502205e-01, 6.37037834e-01, 1.80605759e-01, ...,\n         3.47053983e-01, 6.18832934e-01, 6.61594683e-01],\n        [9.50186650e-01, 5.12724948e-01, 1.53113498e-01, ...,\n         2.40092588e-01, 8.00932280e-01, 7.95316269e-01]],\n\n       [[6.27367549e-01, 3.50592567e-01, 2.67596267e-01, ...,\n         9.33747233e-01, 4.19914646e-02, 6.23536503e-02],\n        [5.99590255e-01, 8.39422489e-01, 4.36373465e-01, ...,\n         7.01431618e-01, 8.74327148e-02, 9.41625527e-01],\n        [4.10594022e-01, 6.44006872e-01, 7.37745684e-01, ...,\n         9.70373511e-02, 5.65935588e-01, 1.16306943e-01],\n...\n         4.66698548e-02, 6.35602700e-01, 1.97647015e-03],\n        [5.07828310e-01, 3.81882021e-02, 7.26744035e-01, ...,\n         5.40607339e-01, 3.18217016e-01, 6.25238155e-02],\n        [1.00995243e-01, 1.60141204e-01, 9.41615526e-01, ...,\n         6.91360406e-04, 6.66159400e-01, 8.35858203e-01]],\n\n       [[5.74990176e-01, 2.47000284e-01, 7.02955584e-01, ...,\n         2.11928556e-01, 6.47800116e-01, 2.45408742e-01],\n        [8.55318970e-01, 9.21355303e-01, 4.96947754e-01, ...,\n         4.48225589e-01, 5.49938670e-01, 3.21374302e-01],\n        [3.17159720e-01, 7.94299492e-01, 5.93065853e-01, ...,\n         4.54709749e-02, 8.27063736e-01, 2.37626493e-01],\n        ...,\n        [3.05645505e-01, 1.40086680e-01, 1.84872517e-01, ...,\n         4.22573849e-02, 8.97970364e-01, 6.97476123e-01],\n        [6.11277702e-02, 8.74971780e-01, 3.08772769e-02, ...,\n         8.44086756e-02, 5.60613581e-01, 8.73437282e-01],\n        [4.84578291e-01, 7.72805099e-01, 3.57798798e-02, ...,\n         9.99326728e-01, 5.60440110e-01, 9.82825364e-01]]],\n      shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6819 0.3036 ... 0.8003 0.113</div><input id='attrs-da575bad-63b0-4bac-b948-6b7d06a35009' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-da575bad-63b0-4bac-b948-6b7d06a35009' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c43b1bd9-4948-4ddd-b3c9-f039c18a5a1d' class='xr-var-data-in' type='checkbox'><label for='data-c43b1bd9-4948-4ddd-b3c9-f039c18a5a1d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.6819084 , 0.30358109, 0.60249987, ..., 0.20771334,\n         0.60657176, 0.48593916],\n        [0.33494552, 0.89970602, 0.42480986, ..., 0.80465496,\n         0.85730216, 0.93839203],\n        [0.57654376, 0.67367647, 0.59650786, ..., 0.1351858 ,\n         0.67556211, 0.9975207 ],\n        ...,\n        [0.98052745, 0.35519126, 0.82209717, ..., 0.46205604,\n         0.16267693, 0.71637416],\n        [0.81156785, 0.90670107, 0.93200319, ..., 0.75286118,\n         0.87627929, 0.21716404],\n        [0.39509674, 0.19917971, 0.06461884, ..., 0.25691024,\n         0.10905826, 0.47405443]],\n\n       [[0.40105254, 0.61861891, 0.87129445, ..., 0.58300068,\n         0.0675017 , 0.77915598],\n        [0.17655726, 0.59863825, 0.1331099 , ..., 0.04122261,\n         0.62331228, 0.66669276],\n        [0.58077707, 0.93540418, 0.44431524, ..., 0.74310233,\n         0.10515556, 0.53394127],\n...\n        [0.31268832, 0.27608142, 0.07244441, ..., 0.95623177,\n         0.64042307, 0.65877857],\n        [0.73143169, 0.53329208, 0.2152468 , ..., 0.75828529,\n         0.20335705, 0.0367316 ],\n        [0.39571717, 0.86369194, 0.6943343 , ..., 0.279548  ,\n         0.65948901, 0.80398607]],\n\n       [[0.48104778, 0.00682288, 0.69094309, ..., 0.99055015,\n         0.77613919, 0.6802553 ],\n        [0.48116656, 0.96957062, 0.07112066, ..., 0.35251729,\n         0.56686817, 0.10240775],\n        [0.20705522, 0.58358184, 0.99814884, ..., 0.78933152,\n         0.71388098, 0.12886807],\n        ...,\n        [0.57936362, 0.22777121, 0.37896902, ..., 0.43773345,\n         0.22079834, 0.12290017],\n        [0.67673051, 0.77407003, 0.22830265, ..., 0.38828502,\n         0.40591291, 0.8907413 ],\n        [0.67068082, 0.18564194, 0.25329828, ..., 0.10675732,\n         0.80034857, 0.11304336]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1c904a1f-fe5a-40e4-a988-41fa66c33e6d' class='xr-section-summary-in' type='checkbox'  ><label for='section-1c904a1f-fe5a-40e4-a988-41fa66c33e6d' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-71a01093-4367-4f65-8eb7-a53be995acdc' class='xr-index-data-in' type='checkbox'/><label for='index-71a01093-4367-4f65-8eb7-a53be995acdc' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-0dc8d114-d93a-48d2-96c5-766eca4760ad' class='xr-index-data-in' type='checkbox'/><label for='index-0dc8d114-d93a-48d2-96c5-766eca4760ad' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-73249d4e-20e2-4038-9aec-86ae0e08d70a' class='xr-index-data-in' type='checkbox'/><label for='index-73249d4e-20e2-4038-9aec-86ae0e08d70a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ebdeefbf-b158-4ae3-a5de-8725fafc1cf8' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-ebdeefbf-b158-4ae3-a5de-8725fafc1cf8' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"X3K8itvMwq"}],"key":"O7FEkwPA60"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"comment","value":" Horizontal lines ","key":"EUpCEjfCtr"},{"type":"comment","value":" Vertical lines ","key":"yeK2vfr8V5"},{"type":"comment","value":" Colored Rectangle ","key":"oH4GfHaSM5"},{"type":"comment","value":" Horizontal lines ","key":"zMidHlnpr8"},{"type":"comment","value":" Vertical lines ","key":"mGfGgnuI99"},{"type":"comment","value":" Colored Rectangle ","key":"cQBYRUdO5V"},{"type":"comment","value":" Horizontal lines ","key":"jxQQZYWUyb"},{"type":"comment","value":" Vertical lines ","key":"nVtJEEH0oz"},{"type":"comment","value":" Colored Rectangle ","key":"kXPUAgxluD"},{"type":"comment","value":" Text ","key":"Ij1z5YGQO6"}],"key":"CBm2GVXZQP"}],"key":"lNjrE2vKce"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The first batch has dimensions ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RwvVYNbn1J"},{"type":"inlineCode","value":"x=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zqdQ52F3Ww"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jMLgad1Xl6"},{"type":"inlineCode","value":"y=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KvbOhsLhKt"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Njybb6qddP"},{"type":"inlineCode","value":"time=50","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GkADmUO1Zn"},{"type":"text","value":", as expected. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jbTlYeylFa"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"haet7FnC7A"},{"type":"text","value":" will yield 100 batches in total (10 batches in the x-direction * 10 batches in the y-direction).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n8E89IbRDT"}],"key":"h4llDJSZ9f"}],"key":"FtqUFEBND3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"The BatchGenerator contains {len(bgen)} batches.\")","key":"W5398Te7YK"},{"type":"output","id":"xCe13MPToRyg4oEypQ0nO","data":[{"output_type":"stream","name":"stdout","text":"The BatchGenerator contains 100 batches.\n"}],"key":"pWmxKe4tq2"}],"key":"npYIRDfzEN"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overlapping Batches with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yycxOjPasE"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Hj8T1VGGd4"}],"identifier":"overlapping-batches-with-input-overlap","label":"Overlapping Batches with input_overlap","html_id":"overlapping-batches-with-input-overlap","implicit":true,"key":"VKZOlWFUr7"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In many applications, it is useful to have overlapping batches to provide context from neighboring data points. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cec2jDak6O"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KK4HrEGt7G"},{"type":"text","value":" parameter allows for this.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NNKbtyVLff"}],"key":"sfLL1j1ZRY"}],"key":"udt8dgZNWg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen_overlap = xbatcher.BatchGenerator(\n    ds, \n    input_dims={\"x\": 10, \"y\": 10}, \n    input_overlap={\"x\": 2, \"y\": 2}\n)\nfirst_batch_overlap = next(iter(bgen_overlap))\nfirst_batch_overlap","key":"np9PJ53u9w"},{"type":"output","id":"ehLXoeHg8z8zWbJ3v9ypj","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.6278 0.1243 ... 0.5604 0.9828\n    precipitation  (x, y, time) float64 40kB 0.6819 0.3036 ... 0.8003 0.113","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.6278 0.1243 ... 0.5604 0.9828\n    precipitation  (x, y, time) float64 40kB 0.6819 0.3036 ... 0.8003 0.113</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-6b02818c-3818-414b-a30a-cdf9f524b54c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-6b02818c-3818-414b-a30a-cdf9f524b54c' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-3d11b431-97c3-4fa3-8cdd-af9104a1e477' class='xr-section-summary-in' type='checkbox'  checked><label for='section-3d11b431-97c3-4fa3-8cdd-af9104a1e477' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-50513d61-cf9f-4d3d-97db-7f09822620b2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-50513d61-cf9f-4d3d-97db-7f09822620b2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-814bd966-385e-4f52-a697-64d95b5dd932' class='xr-var-data-in' type='checkbox'><label for='data-814bd966-385e-4f52-a697-64d95b5dd932' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-9dee3f4b-9c09-4bb8-9269-1a0dc4fe4b34' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9dee3f4b-9c09-4bb8-9269-1a0dc4fe4b34' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-84e3c828-e201-495d-9950-55dd13b8c152' class='xr-var-data-in' type='checkbox'><label for='data-84e3c828-e201-495d-9950-55dd13b8c152' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-d7260eba-914e-48e7-b9db-11f6f80c6a72' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d7260eba-914e-48e7-b9db-11f6f80c6a72' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d7bcc001-4f45-4a7d-b2dd-a1fcf336cb3f' class='xr-var-data-in' type='checkbox'><label for='data-d7bcc001-4f45-4a7d-b2dd-a1fcf336cb3f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f943809a-e01b-4d73-bebf-1f2c377335e6' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f943809a-e01b-4d73-bebf-1f2c377335e6' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6278 0.1243 ... 0.5604 0.9828</div><input id='attrs-0ab5c1c3-51ca-445b-ac54-17931f675c50' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0ab5c1c3-51ca-445b-ac54-17931f675c50' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6c907157-b7a7-4e7f-bd04-caa54b5540cc' class='xr-var-data-in' type='checkbox'><label for='data-6c907157-b7a7-4e7f-bd04-caa54b5540cc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[6.27767441e-01, 1.24335516e-01, 2.73319322e-03, ...,\n         8.31164990e-02, 9.87926896e-01, 1.46707134e-01],\n        [3.37071610e-01, 3.96090526e-01, 1.04070557e-01, ...,\n         3.51741003e-01, 1.74320332e-01, 2.97829456e-01],\n        [8.78372557e-01, 9.37322640e-01, 8.63543102e-01, ...,\n         1.75845895e-01, 4.48677016e-02, 8.59184517e-01],\n        ...,\n        [8.17024308e-01, 3.95273834e-01, 3.40278453e-01, ...,\n         8.79052301e-01, 7.29642232e-01, 8.29342871e-01],\n        [1.93502205e-01, 6.37037834e-01, 1.80605759e-01, ...,\n         3.47053983e-01, 6.18832934e-01, 6.61594683e-01],\n        [9.50186650e-01, 5.12724948e-01, 1.53113498e-01, ...,\n         2.40092588e-01, 8.00932280e-01, 7.95316269e-01]],\n\n       [[6.27367549e-01, 3.50592567e-01, 2.67596267e-01, ...,\n         9.33747233e-01, 4.19914646e-02, 6.23536503e-02],\n        [5.99590255e-01, 8.39422489e-01, 4.36373465e-01, ...,\n         7.01431618e-01, 8.74327148e-02, 9.41625527e-01],\n        [4.10594022e-01, 6.44006872e-01, 7.37745684e-01, ...,\n         9.70373511e-02, 5.65935588e-01, 1.16306943e-01],\n...\n         4.66698548e-02, 6.35602700e-01, 1.97647015e-03],\n        [5.07828310e-01, 3.81882021e-02, 7.26744035e-01, ...,\n         5.40607339e-01, 3.18217016e-01, 6.25238155e-02],\n        [1.00995243e-01, 1.60141204e-01, 9.41615526e-01, ...,\n         6.91360406e-04, 6.66159400e-01, 8.35858203e-01]],\n\n       [[5.74990176e-01, 2.47000284e-01, 7.02955584e-01, ...,\n         2.11928556e-01, 6.47800116e-01, 2.45408742e-01],\n        [8.55318970e-01, 9.21355303e-01, 4.96947754e-01, ...,\n         4.48225589e-01, 5.49938670e-01, 3.21374302e-01],\n        [3.17159720e-01, 7.94299492e-01, 5.93065853e-01, ...,\n         4.54709749e-02, 8.27063736e-01, 2.37626493e-01],\n        ...,\n        [3.05645505e-01, 1.40086680e-01, 1.84872517e-01, ...,\n         4.22573849e-02, 8.97970364e-01, 6.97476123e-01],\n        [6.11277702e-02, 8.74971780e-01, 3.08772769e-02, ...,\n         8.44086756e-02, 5.60613581e-01, 8.73437282e-01],\n        [4.84578291e-01, 7.72805099e-01, 3.57798798e-02, ...,\n         9.99326728e-01, 5.60440110e-01, 9.82825364e-01]]],\n      shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6819 0.3036 ... 0.8003 0.113</div><input id='attrs-2779b089-463c-4594-a681-912cc43042a7' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2779b089-463c-4594-a681-912cc43042a7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a6d88b9e-5d22-4870-b827-fb27163c9945' class='xr-var-data-in' type='checkbox'><label for='data-a6d88b9e-5d22-4870-b827-fb27163c9945' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.6819084 , 0.30358109, 0.60249987, ..., 0.20771334,\n         0.60657176, 0.48593916],\n        [0.33494552, 0.89970602, 0.42480986, ..., 0.80465496,\n         0.85730216, 0.93839203],\n        [0.57654376, 0.67367647, 0.59650786, ..., 0.1351858 ,\n         0.67556211, 0.9975207 ],\n        ...,\n        [0.98052745, 0.35519126, 0.82209717, ..., 0.46205604,\n         0.16267693, 0.71637416],\n        [0.81156785, 0.90670107, 0.93200319, ..., 0.75286118,\n         0.87627929, 0.21716404],\n        [0.39509674, 0.19917971, 0.06461884, ..., 0.25691024,\n         0.10905826, 0.47405443]],\n\n       [[0.40105254, 0.61861891, 0.87129445, ..., 0.58300068,\n         0.0675017 , 0.77915598],\n        [0.17655726, 0.59863825, 0.1331099 , ..., 0.04122261,\n         0.62331228, 0.66669276],\n        [0.58077707, 0.93540418, 0.44431524, ..., 0.74310233,\n         0.10515556, 0.53394127],\n...\n        [0.31268832, 0.27608142, 0.07244441, ..., 0.95623177,\n         0.64042307, 0.65877857],\n        [0.73143169, 0.53329208, 0.2152468 , ..., 0.75828529,\n         0.20335705, 0.0367316 ],\n        [0.39571717, 0.86369194, 0.6943343 , ..., 0.279548  ,\n         0.65948901, 0.80398607]],\n\n       [[0.48104778, 0.00682288, 0.69094309, ..., 0.99055015,\n         0.77613919, 0.6802553 ],\n        [0.48116656, 0.96957062, 0.07112066, ..., 0.35251729,\n         0.56686817, 0.10240775],\n        [0.20705522, 0.58358184, 0.99814884, ..., 0.78933152,\n         0.71388098, 0.12886807],\n        ...,\n        [0.57936362, 0.22777121, 0.37896902, ..., 0.43773345,\n         0.22079834, 0.12290017],\n        [0.67673051, 0.77407003, 0.22830265, ..., 0.38828502,\n         0.40591291, 0.8907413 ],\n        [0.67068082, 0.18564194, 0.25329828, ..., 0.10675732,\n         0.80034857, 0.11304336]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-15e49aa5-1d49-4c7f-a000-7e32cb17f729' class='xr-section-summary-in' type='checkbox'  ><label for='section-15e49aa5-1d49-4c7f-a000-7e32cb17f729' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-0653c393-5380-4247-b472-ff19f71d2542' class='xr-index-data-in' type='checkbox'/><label for='index-0653c393-5380-4247-b472-ff19f71d2542' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-445d8670-8358-4589-bf25-4b4c23976610' class='xr-index-data-in' type='checkbox'/><label for='index-445d8670-8358-4589-bf25-4b4c23976610' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-c774af42-17d8-406c-9502-8d49d7c11713' class='xr-index-data-in' type='checkbox'/><label for='index-c774af42-17d8-406c-9502-8d49d7c11713' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-5c65da9f-edb9-4029-9777-23cea10bad89' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-5c65da9f-edb9-4029-9777-23cea10bad89' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"qVeJdcsrdP"}],"key":"ZL9SdP1gME"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d7QW8a7OxI"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"y8EA3cRVvj"},{"type":"text","value":" parameter specifies the number of elements to overlap between consecutive batches. The size of the batches themselves does not change. Let’s verify this by inspecting the coordinates of the first two batches.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vyb87t6Uoo"}],"key":"C55n3aAF0j"}],"key":"NiL2kjsu43"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"Batch 1 y-coords: {bgen_overlap[0].y.values}, Batch 1 x-coords: {bgen_overlap[0].x.values}\")\nprint(f\"Batch 2 y-coords: {bgen_overlap[1].y.values}, Batch 2 x-coords: {bgen_overlap[1].x.values}\")\nprint(f\"Batch 3 y-coords: {bgen_overlap[2].y.values}, Batch 3 x-coords: {bgen_overlap[2].x.values}\")\nprint(f\"Batch 13 y-coords: {bgen_overlap[12].y.values}, Batch 13 x-coords: {bgen_overlap[12].x.values}\")\nprint(f\"Batch 14 y-coords: {bgen_overlap[13].y.values}, Batch 11 x-coords: {bgen_overlap[13].x.values}\")","key":"U1VTpd7XoI"},{"type":"output","id":"DNBBtXemsQ65MNS_lIOiy","data":[{"output_type":"stream","name":"stdout","text":"Batch 1 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 1 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 2 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 2 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 3 y-coords: [16 17 18 19 20 21 22 23 24 25], Batch 3 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 13 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 13 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\nBatch 14 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 11 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\n"}],"key":"CyFLqulZsv"}],"key":"A0Bf0aGNdM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As you can see, the second batch starts at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rERBDIdy7I"},{"type":"inlineCode","value":"y=8","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DwImJIJrC6"},{"type":"text","value":", which is an overlap of 2 elements with the first batch, which ends at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Qw5M0oRcjq"},{"type":"inlineCode","value":"y=9","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Js4pYBrhSn"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gn0x5OXjp4"}],"key":"IoDnyoIhQG"}],"key":"pQVjQfY75b"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Integration with PyTorch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vDzAqcEFfa"}],"identifier":"integration-with-pytorch","label":"Integration with PyTorch","html_id":"integration-with-pytorch","implicit":true,"key":"zDz9m1J7Rh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xRLb3TE7cQ"},{"type":"text","value":" provides ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xVKUY8ZdlQ"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JKuHKT9cHu"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lsW2N85z6W"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YtJkh6Ui0a"},{"type":"text","value":" to wrap the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rl1t6QisCq"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dY4ISNfR9K"},{"type":"text","value":" for use with PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HU1OYWIsEA"}],"key":"y7xws0pIYF"}],"key":"q9a5y70ncn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BVtAA94KAP"},{"type":"text","value":" vs. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Cr30prixv2"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ui2bpgQRzs"}],"identifier":"mapdataset-vs-iterabledataset","label":"MapDataset vs. IterableDataset","html_id":"mapdataset-vs-iterabledataset","implicit":true,"key":"NwFdo8yDqY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RbeDtVrxeG"},{"type":"text","value":": Implements ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yQ2xDIDeSd"},{"type":"inlineCode","value":"__getitem__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mLulDtHc3u"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"J94MAGAeG8"},{"type":"inlineCode","value":"__len__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NBVzj2wMgn"},{"type":"text","value":", allowing for random access to data samples. This is the most common type of dataset in PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pWIFZNjIOK"}],"key":"yZiCDqi81l"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JuDtP8OzVA"},{"type":"text","value":": Implements ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"koHWIUN27w"},{"type":"inlineCode","value":"__iter__","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"sHA3FzmpFq"},{"type":"text","value":", and is suitable for very large datasets that may not fit into memory, as it streams data.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ihqw5OkOYX"}],"key":"WHhnGLiREt"}],"key":"eoasgzyf7P"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We will use ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zpy7ooHgwE"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cM2dYQt3yW"},{"type":"text","value":" for this example.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yn7fcHkFnB"}],"key":"oawON0yXqN"}],"key":"CKqaNxPz1O"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen[0].temperature.shape\nbgen[0].precipitation.shape","key":"GG0CkW45tD"},{"type":"output","id":"CY3VWTmgWCsNcNCWazplh","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"(10, 10, 50)","content_type":"text/plain"}}}],"key":"aqJoffinWj"}],"key":"T66pEYMurW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def patch_to_tensor(patch):\n    temp_patch = torch.tensor(patch.temperature.data)\n    prcp_patch = torch.tensor(patch.precipitation.data)\n    stacked_patch = torch.stack((temp_patch, prcp_patch), dim=0)\n    patch = stacked_patch\n    patch = torch.nan_to_num(patch)\n    # patch = torch.unsqueeze(patch, 0)\n    patch = patch.float()\n    return patch\n\nmap_ds = MapDataset(bgen, transform=patch_to_tensor)","key":"szcdYDKYFe"},{"type":"output","id":"N7MUIEaugddN1sAvpTQpu","data":[],"key":"VxSOqA0WrU"}],"key":"BrTEavAPCb"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nk75T2rVZR"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YK3RxVOKCy"},{"type":"text","value":" can then be used with a PyTorch ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jM5naFwcwF"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NZHQRhMuXw"},{"type":"text","value":", which provides utilities for shuffling, batching, and multiprocessing.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I3tY0Gl5k9"}],"key":"n261jQDHit"}],"key":"Z8RCHw4KtB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dataloader = torch.utils.data.DataLoader(map_ds, batch_size=4)","key":"EUCWbaXLvq"},{"type":"output","id":"VOad_WJUJTyi84Ib3ptp0","data":[],"key":"QD34evdXz6"}],"key":"MbXy2wQTNj"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspecting a batch from the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"C31KseVBjy"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BH6Mq0TtvV"},{"type":"text","value":" reveals a batch of PyTorch tensors.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gdMlyybLzO"}],"key":"QBOZM0IBwc"}],"key":"OfSxCa7Ir5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"torch_batch = next(iter(dataloader))\ntorch_batch.shape","key":"s3SnwYlWzs"},{"type":"output","id":"nK0oKpx_c7Ek4_aGnax-Z","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"torch.Size([4, 2, 10, 10, 50])","content_type":"text/plain"}}}],"key":"rqjQOoIPdL"}],"key":"yKyeI2YarC"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"V7h64dOk7r"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bUujMI3ajw"},{"type":"text","value":" has stacked 4 of the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tYIAG7ywLW"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pcZ4xkES2Z"},{"type":"text","value":" batches, creating a new ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JlxCmiC1ju"},{"type":"inlineCode","value":"batch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x1uVUNZuYP"},{"type":"text","value":" dimension of size 4. The data is now ready for use in a PyTorch model.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yxen0Rwq0n"}],"key":"i2oFUiAHAG"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the next notebook, we will explore how to reconstruct an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UFCveRMocB"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Qoy0g86cWH"},{"type":"text","value":" from a model’s output.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sW6HgC38Ps"}],"key":"DlYstirDkS"}],"key":"uQDipN9Kau"}],"key":"wlpRZsrQj1"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Reconstructing Xarray Datasets from Model Outputs","url":"/notebooks/xbatcher-reconstruction","group":"Xbatcher fundamentals"}}},"domain":"http://localhost:3000"}