{"version":2,"kind":"Notebook","sha256":"9574fb47ef3bfe95fea3110f7e2f36760d3d138268e1508eb21cf2b9efe7ea32","slug":"notebooks.xbatcher-dataloading","location":"/notebooks/xbatcher_dataloading.ipynb","dependencies":[],"frontmatter":{"title":"Dataloading from Xarray Datasets","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"cookbook-dev","language":"python"},"authors":[{"nameParsed":{"literal":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","given":"and The Project Pythia Community","family":"Keenan Ganz","suffix":"Nabin Kalauni"},"name":"Keenan Ganz, Nabin Kalauni, and The Project Pythia Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/xbatcher-deep-learning","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/xbatcher-deep-learning/blob/main/notebooks/xbatcher_dataloading.ipynb","exports":[{"format":"ipynb","filename":"xbatcher_dataloading.ipynb","url":"/xbatcher-deep-learning/build/xbatcher_dataloading-58b9c6db846ce6dda2f53003bc22509d.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"z5fvYpDcVQ"}],"key":"NYnLaU2VQR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Gb7ISr7zGW"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"XyOOYS4OWW"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Working with large, multi-dimensional datasets, common in fields like climate science and oceanography, presents a significant challenge when preparing data for machine learning models. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jwkbpjvbop"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"w9VD250af1"},{"type":"text","value":" library is designed to simplify this preprocessing step by serving as a bridge between the labeled, multi-dimensional data structures of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KXxHflYCr5"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RQkB2q4S6L"},{"type":"text","value":" and the tensor-based inputs required by deep learning frameworks such as PyTorch and TensorFlow.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bX9N4OfsQV"}],"key":"cP5msPXnAZ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This guide provides an introduction to the fundamentals of ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CIr7Blqygg"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CipDqm1Ybz"},{"type":"text","value":". We will cover how to create a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"M1fmqJrDqU"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FOioXu3JwZ"},{"type":"text","value":", customize it for specific needs, and prepare the resulting data for integration with a PyTorch model.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"s5CK8PqZXp"}],"key":"BrelfbYcTD"},{"type":"heading","depth":2,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Y6CajiN8JV"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"gyalm53shO"},{"type":"table","position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BLfYUKaHoL"}],"key":"t9Y8KjmOGX"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"l3IolGjdXX"}],"key":"iJ9ET9E4W2"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"B6A5dK8Uga"}],"key":"S078TsM6eZ"}],"key":"yUQRJwP3fo"},{"type":"tableRow","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Intro to Xarray","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"nWjOoblVez"}],"urlSource":"https://tutorial.xarray.dev/overview/xarray-in-45-min.html","key":"lnHKJ7FpPH"}],"key":"zVdUhZm2iR"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"EseiFTkIPb"}],"key":"zT81dEjBx4"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Array indexing","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"AW1SPQ5KqQ"}],"key":"uIQjfgXPQN"}],"key":"VOEUUSjdEf"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Datasets and DataLoaders","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"QOxSVWt26I"}],"urlSource":"https://docs.pytorch.org/tutorials/beginner/basics/data_tutorial.html","key":"aLsbjGdnAg"}],"key":"WfZEtj4SSV"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"wpznJlgkqE"}],"key":"aWPF0e5BDb"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Batching data","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"DiBu4beOdL"}],"key":"ZBo5HoQxC0"}],"key":"BxoiAu7rWb"}],"key":"uyUKq5tf0g"}],"key":"sf0KFiRPOq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Dif67mNuko"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"oFxVh2H0OB"}],"key":"kmy5NLy6zp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport torch\nimport xbatcher\nfrom xbatcher.loaders.torch import MapDataset, IterableDataset","key":"FbgZJ9z1g8"},{"type":"output","id":"BtAklLLF-SFe3ss_ZOqd6","data":[],"key":"FiMMRRb1yc"}],"key":"FDvekmv8qF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating a Sample Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QEfOgA9RzH"}],"identifier":"creating-a-sample-dataset","label":"Creating a Sample Dataset","html_id":"creating-a-sample-dataset","implicit":true,"key":"YCtMm9WODl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To begin, we will create a sample ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gudGdElRy1"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"izTVGsMYiB"},{"type":"text","value":". This allows us to focus on the mechanics of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VCgg4cVYBS"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dS7i25Hf5I"},{"type":"text","value":" without the overhead of a specific real-world dataset. This sample can be replaced by any ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IcAzl61J6x"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DmKPIGJvvm"},{"type":"text","value":" loaded from a file (e.g., NetCDF, Zarr).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WyLUMdTJpK"}],"key":"cUtfETuHCC"}],"key":"khM1ghnMN2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ds = xr.Dataset(\n    {\n        \"temperature\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n        \"precipitation\": ((\"x\", \"y\", \"time\"), np.random.rand(100, 100, 50)),\n    },\n    coords={\n        \"x\": np.arange(100),\n        \"y\": np.arange(100),\n        \"time\": np.arange(50),\n    },\n)\nds","key":"fJwb239sQ8"},{"type":"output","id":"yDVi9rW7IPRNtU_eIlKiW","data":[{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.7354 0.4581 ... 0.8095 0.00241\n    precipitation  (x, y, time) float64 4MB 0.9583 0.8724 ... 0.7046 0.4055","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 8MB\nDimensions:        (x: 100, y: 100, time: 50)\nCoordinates:\n  * x              (x) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * y              (y) int64 800B 0 1 2 3 4 5 6 7 8 ... 92 93 94 95 96 97 98 99\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 4MB 0.7354 0.4581 ... 0.8095 0.00241\n    precipitation  (x, y, time) float64 4MB 0.9583 0.8724 ... 0.7046 0.4055</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-3c3d80f1-0c72-4d7e-94e3-a512bc3ff30c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-3c3d80f1-0c72-4d7e-94e3-a512bc3ff30c' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 100</li><li><span class='xr-has-index'>y</span>: 100</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-01b09fac-0611-4183-b973-84a9a58d212d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-01b09fac-0611-4183-b973-84a9a58d212d' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-db931336-6f13-4688-a46f-a3e335da3a52' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-db931336-6f13-4688-a46f-a3e335da3a52' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8d76b98f-5402-4d7b-b373-95277917baae' class='xr-var-data-in' type='checkbox'><label for='data-8d76b98f-5402-4d7b-b373-95277917baae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input id='attrs-635d5339-a533-45f9-8574-890df78ab713' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-635d5339-a533-45f9-8574-890df78ab713' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bf729b6c-a077-4da9-8f75-28835f9dd0f2' class='xr-var-data-in' type='checkbox'><label for='data-bf729b6c-a077-4da9-8f75-28835f9dd0f2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-523fb2b2-72f1-4a2a-ba67-ed4fc6560bcb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-523fb2b2-72f1-4a2a-ba67-ed4fc6560bcb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-02c2b9ff-0951-4ce9-a84d-aed420384c4f' class='xr-var-data-in' type='checkbox'><label for='data-02c2b9ff-0951-4ce9-a84d-aed420384c4f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-378d9bfb-a130-4efd-aee6-0e1eec22e0e1' class='xr-section-summary-in' type='checkbox'  checked><label for='section-378d9bfb-a130-4efd-aee6-0e1eec22e0e1' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.7354 0.4581 ... 0.8095 0.00241</div><input id='attrs-0554b4a8-c77e-4ed7-b7d1-beda2a33fe9e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0554b4a8-c77e-4ed7-b7d1-beda2a33fe9e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5d864a17-d82b-4032-a108-12c7d418dba7' class='xr-var-data-in' type='checkbox'><label for='data-5d864a17-d82b-4032-a108-12c7d418dba7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.73537092, 0.45809564, 0.68102467, ..., 0.58670172,\n         0.9231434 , 0.39858542],\n        [0.6036277 , 0.17717862, 0.1311996 , ..., 0.61035319,\n         0.13848547, 0.56715586],\n        [0.63696474, 0.6201946 , 0.00372995, ..., 0.41149546,\n         0.28156088, 0.93576605],\n        ...,\n        [0.58181688, 0.37078356, 0.94927205, ..., 0.75908788,\n         0.37349337, 0.17365348],\n        [0.64190987, 0.93977873, 0.62746629, ..., 0.42384582,\n         0.17839907, 0.13126699],\n        [0.25630394, 0.26239287, 0.39563447, ..., 0.53804873,\n         0.85147479, 0.08924896]],\n\n       [[0.83046974, 0.25563095, 0.29712974, ..., 0.42019473,\n         0.41915186, 0.77083157],\n        [0.40197269, 0.89824124, 0.5167072 , ..., 0.04082787,\n         0.11080842, 0.77827145],\n        [0.91569241, 0.25864566, 0.76332239, ..., 0.8319535 ,\n         0.65929607, 0.69372127],\n...\n        [0.38396949, 0.76990525, 0.85257993, ..., 0.55185905,\n         0.47306914, 0.89134336],\n        [0.69764319, 0.54474875, 0.48562533, ..., 0.87893004,\n         0.28607171, 0.49921685],\n        [0.3948279 , 0.49337296, 0.58327552, ..., 0.53627104,\n         0.59773574, 0.82298722]],\n\n       [[0.49428519, 0.05808847, 0.56131738, ..., 0.26715778,\n         0.50092187, 0.61669622],\n        [0.83656377, 0.28638101, 0.43282758, ..., 0.83234087,\n         0.54243233, 0.7227637 ],\n        [0.04862019, 0.79441996, 0.4996206 , ..., 0.01909628,\n         0.08692722, 0.43779092],\n        ...,\n        [0.40766571, 0.03662824, 0.60651667, ..., 0.34694618,\n         0.65545684, 0.32066157],\n        [0.04281704, 0.98302429, 0.41228603, ..., 0.29864013,\n         0.6298459 , 0.19272933],\n        [0.9147141 , 0.48896258, 0.80265866, ..., 0.72606782,\n         0.80947457, 0.00240982]]], shape=(100, 100, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.9583 0.8724 ... 0.7046 0.4055</div><input id='attrs-71945174-baf6-4f31-9fac-a8144f94ecdd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-71945174-baf6-4f31-9fac-a8144f94ecdd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f30bce6a-4d16-4f0a-a728-ee3a6e01cd05' class='xr-var-data-in' type='checkbox'><label for='data-f30bce6a-4d16-4f0a-a728-ee3a6e01cd05' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.95834132, 0.87243774, 0.76391552, ..., 0.69756531,\n         0.90056793, 0.30527412],\n        [0.25019404, 0.52022682, 0.86749413, ..., 0.72006895,\n         0.49718213, 0.59695163],\n        [0.37943503, 0.82962591, 0.30664744, ..., 0.7597681 ,\n         0.62854223, 0.20455609],\n        ...,\n        [0.4654589 , 0.01397212, 0.50274893, ..., 0.02611594,\n         0.84548915, 0.47284525],\n        [0.05354758, 0.92976533, 0.22663269, ..., 0.27221742,\n         0.03813215, 0.73829944],\n        [0.01949632, 0.24742163, 0.16230172, ..., 0.24277175,\n         0.26654475, 0.30577417]],\n\n       [[0.00451477, 0.5349297 , 0.70054919, ..., 0.85326259,\n         0.0840251 , 0.47774334],\n        [0.92472385, 0.85087475, 0.36690708, ..., 0.80743513,\n         0.01906034, 0.98487147],\n        [0.51028795, 0.75528546, 0.3092481 , ..., 0.53264952,\n         0.48647912, 0.96728086],\n...\n        [0.17392077, 0.67001184, 0.65862385, ..., 0.5996519 ,\n         0.33478097, 0.82864026],\n        [0.37872774, 0.48817416, 0.0057962 , ..., 0.3620789 ,\n         0.85800165, 0.33563346],\n        [0.75811397, 0.59144264, 0.43865465, ..., 0.79098655,\n         0.78851829, 0.42967986]],\n\n       [[0.36586131, 0.38101061, 0.30016456, ..., 0.13100674,\n         0.21634175, 0.76073419],\n        [0.32617402, 0.7589883 , 0.22635868, ..., 0.30016321,\n         0.89764354, 0.65387546],\n        [0.82949104, 0.89726307, 0.32827914, ..., 0.06602662,\n         0.6611832 , 0.5166474 ],\n        ...,\n        [0.26287987, 0.47880429, 0.38126121, ..., 0.1250989 ,\n         0.11523999, 0.20148885],\n        [0.60370914, 0.07608497, 0.26620409, ..., 0.24351083,\n         0.89055978, 0.14755049],\n        [0.04887129, 0.50910127, 0.62091422, ..., 0.63351305,\n         0.70460361, 0.40549401]]], shape=(100, 100, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6d255a1f-9095-43f0-83bb-14dc33d98ed1' class='xr-section-summary-in' type='checkbox'  ><label for='section-6d255a1f-9095-43f0-83bb-14dc33d98ed1' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-43c45afa-0fdf-4bdf-88eb-00d18e2e6d0c' class='xr-index-data-in' type='checkbox'/><label for='index-43c45afa-0fdf-4bdf-88eb-00d18e2e6d0c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-d4313d2f-840d-4eb7-b494-7afb20081e12' class='xr-index-data-in' type='checkbox'/><label for='index-d4313d2f-840d-4eb7-b494-7afb20081e12' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,\n       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n       90, 91, 92, 93, 94, 95, 96, 97, 98, 99],\n      dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-fbd40a1d-8a5d-4b60-a354-f4c77524edd9' class='xr-index-data-in' type='checkbox'/><label for='index-fbd40a1d-8a5d-4b60-a354-f4c77524edd9' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b5c05d39-3f69-495d-9f53-097e35ff5e76' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-b5c05d39-3f69-495d-9f53-097e35ff5e76' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"z70DwaIAf0"}],"key":"nCadmzIDG0"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The dataset contains two variables, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"o3EQDqWRwQ"},{"type":"inlineCode","value":"temperature","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hcUgi0BmU7"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jioACGHnI6"},{"type":"inlineCode","value":"precipitation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xQEaOsSzh1"},{"type":"text","value":", and three dimensions: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mfYDuQWAMH"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZSr35Wj7gS"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mMGDgrTqKT"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"trTTylRyu8"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mAWec3QKR5"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vudOUOxTIw"},{"type":"text","value":". We will now use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HI2YdkwPBb"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dIsvEsqk5u"},{"type":"text","value":" to generate batches from this dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SJ61GOzipv"}],"key":"VjXhFBhRbA"}],"key":"piCtpbBjxC"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KFyhehdmuO"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Gb1aP7AtVL"}],"identifier":"the-batchgenerator","label":"The BatchGenerator","html_id":"the-batchgenerator","implicit":true,"key":"SlK28VAjnF"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RmqtoezSZQ"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hq5bAc6TMN"},{"type":"text","value":" is the core component of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QjryQ7tfII"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CT0VHiOwhL"},{"type":"text","value":". It is a Python generator that yields batches of data from an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sKdlp9ICeC"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"t14PsL2M5N"},{"type":"text","value":" object.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"c3Cj4odBQN"}],"key":"qa8DnsVKFs"}],"key":"vtVfEhYtxT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen = xbatcher.BatchGenerator(ds, input_dims={\"x\": 10, \"y\": 10})","key":"WFLkYq389N"},{"type":"output","id":"EuYqQbSvAh4l7NvNq22ME","data":[],"key":"h2GeKWckha"}],"key":"QtUMXiTyRk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XXTdL0CuBC"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dZGqwvk8X6"},{"type":"text","value":" is initialized with the dataset and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RjbhrGAeoE"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LYj3zEmZgy"},{"type":"text","value":" parameter. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IcPaSensew"},{"type":"inlineCode","value":"input_dims","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lC3wDboVLg"},{"type":"text","value":" specifies the size of the batches along each dimension. In this case, we are creating batches of size 10x10 along the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hR6JTmqRam"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LU5NcU9mAz"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A9PcKqoaSH"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OV5EPrsqOP"},{"type":"text","value":" dimensions. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BtZVEQqIsw"},{"type":"inlineCode","value":"time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tkLDeH3HhZ"},{"type":"text","value":" dimension is not specified, so ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J0O9DiuMvt"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fwNcaHGReI"},{"type":"text","value":" will yield batches that include all time steps.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Stl3cI2xsY"}],"key":"y2ngGMhXDd"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s inspect the first batch generated.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SnDyKLZ7pV"}],"key":"MwzAxPtrC4"}],"key":"EZXdQRUVaO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"first_batch = next(iter(bgen))\nfirst_batch","key":"k2Ah877oT7"},{"type":"output","id":"Y3TlU4CDPz4baq9rNp7VI","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.7354 0.4581 ... 0.1689 0.862\n    precipitation  (x, y, time) float64 40kB 0.9583 0.8724 ... 0.411 0.6209","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.7354 0.4581 ... 0.1689 0.862\n    precipitation  (x, y, time) float64 40kB 0.9583 0.8724 ... 0.411 0.6209</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-cbde52f7-552f-4e2e-bcee-9de2c4df2d8e' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-cbde52f7-552f-4e2e-bcee-9de2c4df2d8e' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-f91897e9-5542-49d7-a993-2d7beb25af06' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f91897e9-5542-49d7-a993-2d7beb25af06' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-67719767-baa6-4295-90e9-7ce7780f6cad' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-67719767-baa6-4295-90e9-7ce7780f6cad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e933784e-557d-4545-8346-cd4f432f561c' class='xr-var-data-in' type='checkbox'><label for='data-e933784e-557d-4545-8346-cd4f432f561c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-b9ecfae6-278e-4cfd-a912-5cf058b3ed26' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b9ecfae6-278e-4cfd-a912-5cf058b3ed26' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fa71763c-1cb4-4fa1-a362-ae34a7fbd323' class='xr-var-data-in' type='checkbox'><label for='data-fa71763c-1cb4-4fa1-a362-ae34a7fbd323' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-3fac7318-1cf4-442f-aff4-a4fe4282f3be' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3fac7318-1cf4-442f-aff4-a4fe4282f3be' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-636ab106-2472-4e7c-8226-bc387f3ecc01' class='xr-var-data-in' type='checkbox'><label for='data-636ab106-2472-4e7c-8226-bc387f3ecc01' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-03385de4-809c-46cc-bcef-4f759bdba3a3' class='xr-section-summary-in' type='checkbox'  checked><label for='section-03385de4-809c-46cc-bcef-4f759bdba3a3' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.7354 0.4581 ... 0.1689 0.862</div><input id='attrs-0aeda963-95f0-48d7-8b25-da3582dffdb1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0aeda963-95f0-48d7-8b25-da3582dffdb1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5c2f81cb-8037-4c44-ad20-e1415e14307d' class='xr-var-data-in' type='checkbox'><label for='data-5c2f81cb-8037-4c44-ad20-e1415e14307d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.73537092, 0.45809564, 0.68102467, ..., 0.58670172,\n         0.9231434 , 0.39858542],\n        [0.6036277 , 0.17717862, 0.1311996 , ..., 0.61035319,\n         0.13848547, 0.56715586],\n        [0.63696474, 0.6201946 , 0.00372995, ..., 0.41149546,\n         0.28156088, 0.93576605],\n        ...,\n        [0.31875239, 0.62034642, 0.29289192, ..., 0.13679458,\n         0.52433078, 0.03124511],\n        [0.4471717 , 0.02673827, 0.95276322, ..., 0.19292661,\n         0.99691574, 0.95393047],\n        [0.29801911, 0.72835742, 0.72491621, ..., 0.07429763,\n         0.61648053, 0.50132588]],\n\n       [[0.83046974, 0.25563095, 0.29712974, ..., 0.42019473,\n         0.41915186, 0.77083157],\n        [0.40197269, 0.89824124, 0.5167072 , ..., 0.04082787,\n         0.11080842, 0.77827145],\n        [0.91569241, 0.25864566, 0.76332239, ..., 0.8319535 ,\n         0.65929607, 0.69372127],\n...\n        [0.12242954, 0.11933535, 0.05036088, ..., 0.64525521,\n         0.03472314, 0.40484595],\n        [0.14459508, 0.2341668 , 0.57275164, ..., 0.97433116,\n         0.22527367, 0.45072553],\n        [0.7932117 , 0.01310721, 0.24229464, ..., 0.25495209,\n         0.38657914, 0.85389341]],\n\n       [[0.8904773 , 0.97734866, 0.19483127, ..., 0.44823684,\n         0.48349507, 0.48254431],\n        [0.69106457, 0.93766895, 0.06582307, ..., 0.73308683,\n         0.01181996, 0.82019304],\n        [0.0976463 , 0.34937663, 0.64000643, ..., 0.66810402,\n         0.12100529, 0.74194131],\n        ...,\n        [0.07460134, 0.36679947, 0.16375436, ..., 0.45088112,\n         0.57333167, 0.55218461],\n        [0.78755196, 0.62957216, 0.76995534, ..., 0.85232957,\n         0.32428252, 0.55082061],\n        [0.05098048, 0.37393814, 0.16761489, ..., 0.80773466,\n         0.16890561, 0.86197212]]], shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.9583 0.8724 ... 0.411 0.6209</div><input id='attrs-b4c1002c-3b2a-4f92-890a-3b6159be10c3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b4c1002c-3b2a-4f92-890a-3b6159be10c3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7b187347-81da-419f-ba4c-68e17241490c' class='xr-var-data-in' type='checkbox'><label for='data-7b187347-81da-419f-ba4c-68e17241490c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.95834132, 0.87243774, 0.76391552, ..., 0.69756531,\n         0.90056793, 0.30527412],\n        [0.25019404, 0.52022682, 0.86749413, ..., 0.72006895,\n         0.49718213, 0.59695163],\n        [0.37943503, 0.82962591, 0.30664744, ..., 0.7597681 ,\n         0.62854223, 0.20455609],\n        ...,\n        [0.70572506, 0.3639288 , 0.9744724 , ..., 0.56121349,\n         0.08487188, 0.15691857],\n        [0.36254129, 0.77753486, 0.97552941, ..., 0.42118428,\n         0.50005376, 0.91414361],\n        [0.1755658 , 0.27551722, 0.34406445, ..., 0.77337649,\n         0.41987317, 0.99605131]],\n\n       [[0.00451477, 0.5349297 , 0.70054919, ..., 0.85326259,\n         0.0840251 , 0.47774334],\n        [0.92472385, 0.85087475, 0.36690708, ..., 0.80743513,\n         0.01906034, 0.98487147],\n        [0.51028795, 0.75528546, 0.3092481 , ..., 0.53264952,\n         0.48647912, 0.96728086],\n...\n        [0.58735632, 0.41071573, 0.25775308, ..., 0.08926412,\n         0.00909389, 0.37417653],\n        [0.29744133, 0.40558768, 0.63963201, ..., 0.58261541,\n         0.10836689, 0.47012577],\n        [0.91467036, 0.70856793, 0.50978671, ..., 0.31416631,\n         0.02880694, 0.37946882]],\n\n       [[0.63223518, 0.35945254, 0.30344822, ..., 0.64044685,\n         0.83842166, 0.15239269],\n        [0.51634376, 0.01647559, 0.29630614, ..., 0.18990179,\n         0.09516875, 0.88830932],\n        [0.34549571, 0.95110295, 0.80658022, ..., 0.15361423,\n         0.72185373, 0.853188  ],\n        ...,\n        [0.18032203, 0.56885597, 0.9271283 , ..., 0.00926782,\n         0.58293505, 0.22450661],\n        [0.23651412, 0.38582911, 0.68062806, ..., 0.88191258,\n         0.08158899, 0.32603981],\n        [0.20143344, 0.32975715, 0.71494672, ..., 0.59084954,\n         0.41096117, 0.62090321]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-01d1f87d-9028-46c1-8073-4e13e224bba1' class='xr-section-summary-in' type='checkbox'  ><label for='section-01d1f87d-9028-46c1-8073-4e13e224bba1' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-8a3e3e31-b9bb-4b2a-80b8-4405940ce1d8' class='xr-index-data-in' type='checkbox'/><label for='index-8a3e3e31-b9bb-4b2a-80b8-4405940ce1d8' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-e1b5fd4c-f937-455d-9355-7d26ad700312' class='xr-index-data-in' type='checkbox'/><label for='index-e1b5fd4c-f937-455d-9355-7d26ad700312' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-0eab5e47-d55e-4830-abf7-3e224c46c339' class='xr-index-data-in' type='checkbox'/><label for='index-0eab5e47-d55e-4830-abf7-3e224c46c339' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d5fadea0-ffdc-4256-a207-6882dc9bbd9b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d5fadea0-ffdc-4256-a207-6882dc9bbd9b' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"igRHLM7eFa"}],"key":"vYTWnA8xeK"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"comment","value":" Horizontal lines ","key":"rMoDcxuUF2"},{"type":"comment","value":" Vertical lines ","key":"CJiJMTnZRV"},{"type":"comment","value":" Colored Rectangle ","key":"JWMM2ZL6ey"},{"type":"comment","value":" Horizontal lines ","key":"MvfqkgeGKb"},{"type":"comment","value":" Vertical lines ","key":"LacMpTAKx1"},{"type":"comment","value":" Colored Rectangle ","key":"Ez2YpD95z7"},{"type":"comment","value":" Horizontal lines ","key":"ozlD9VwinO"},{"type":"comment","value":" Vertical lines ","key":"yHlYlh2OWy"},{"type":"comment","value":" Colored Rectangle ","key":"xrjKqOrWn2"},{"type":"comment","value":" Text ","key":"UsvChhBiYT"}],"key":"AHQViEF1h6"}],"key":"kewxG0sR4t"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The first batch has dimensions ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HmZyqTKfGW"},{"type":"inlineCode","value":"x=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WX0LcTlSHW"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SIuCKn3dYS"},{"type":"inlineCode","value":"y=10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Hn1PUXxKEH"},{"type":"text","value":", and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oq2pyoeFjl"},{"type":"inlineCode","value":"time=50","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xSfhKk2FEo"},{"type":"text","value":", as expected. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NnSb8FILcn"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hYUJGojDlI"},{"type":"text","value":" will yield 100 batches in total (10 batches in the x-direction * 10 batches in the y-direction).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cUu0IoPMAN"}],"key":"XSTVrZW7HO"}],"key":"zVGAuPlTtm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"The BatchGenerator contains {len(bgen)} batches.\")","key":"LMMKNoy4BX"},{"type":"output","id":"AB3D8XllmwSeacKi_k_eu","data":[{"output_type":"stream","name":"stdout","text":"The BatchGenerator contains 100 batches.\n"}],"key":"BHj2iQScpb"}],"key":"OPyUXWvgIO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overlapping Batches with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kpaIm5dMs5"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W8biiwXQEq"}],"identifier":"overlapping-batches-with-input-overlap","label":"Overlapping Batches with input_overlap","html_id":"overlapping-batches-with-input-overlap","implicit":true,"key":"K8EAt1UCGZ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In many applications, it is useful to have overlapping batches to provide context from neighboring data points. The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"r5mvR4iuz8"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vunP4c5FY4"},{"type":"text","value":" parameter allows for this.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Sqgja8KmGw"}],"key":"g8lrsGDRll"}],"key":"zJhLPX1eLj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen_overlap = xbatcher.BatchGenerator(\n    ds, \n    input_dims={\"x\": 10, \"y\": 10}, \n    input_overlap={\"x\": 2, \"y\": 2}\n)\nfirst_batch_overlap = next(iter(bgen_overlap))\nfirst_batch_overlap","key":"OHEbBHbMLd"},{"type":"output","id":"HC-a0H2cyQvNtIvXfuWgK","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.7354 0.4581 ... 0.1689 0.862\n    precipitation  (x, y, time) float64 40kB 0.9583 0.8724 ... 0.411 0.6209","content_type":"text/plain"},"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 81kB\nDimensions:        (x: 10, y: 10, time: 50)\nCoordinates:\n  * x              (x) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * y              (y) int64 80B 0 1 2 3 4 5 6 7 8 9\n  * time           (time) int64 400B 0 1 2 3 4 5 6 7 ... 42 43 44 45 46 47 48 49\nData variables:\n    temperature    (x, y, time) float64 40kB 0.7354 0.4581 ... 0.1689 0.862\n    precipitation  (x, y, time) float64 40kB 0.9583 0.8724 ... 0.411 0.6209</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-b2eb6699-0770-48ca-8094-551bd184e77d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-b2eb6699-0770-48ca-8094-551bd184e77d' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 10</li><li><span class='xr-has-index'>y</span>: 10</li><li><span class='xr-has-index'>time</span>: 50</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-54dbc674-7a27-423e-86bf-92b0ce6765d2' class='xr-section-summary-in' type='checkbox'  checked><label for='section-54dbc674-7a27-423e-86bf-92b0ce6765d2' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-4f217964-2d1d-4a40-9dcf-37680b6c9a26' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4f217964-2d1d-4a40-9dcf-37680b6c9a26' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6df1f856-56f6-471b-8073-130f98ab2b39' class='xr-var-data-in' type='checkbox'><label for='data-6df1f856-56f6-471b-8073-130f98ab2b39' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 7 8 9</div><input id='attrs-ea401808-ec32-4c40-b142-82daf47e2106' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ea401808-ec32-4c40-b142-82daf47e2106' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c30fa886-b832-4b2b-8bb2-bcf55877fad9' class='xr-var-data-in' type='checkbox'><label for='data-c30fa886-b832-4b2b-8bb2-bcf55877fad9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 44 45 46 47 48 49</div><input id='attrs-ed278fa4-6c3f-47c0-aac1-1aabb80dce55' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ed278fa4-6c3f-47c0-aac1-1aabb80dce55' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-44ff6912-efc2-4d34-a3d4-4b4bf4c84c03' class='xr-var-data-in' type='checkbox'><label for='data-44ff6912-efc2-4d34-a3d4-4b4bf4c84c03' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-758f915a-4c22-4d94-9574-e7f348e20bda' class='xr-section-summary-in' type='checkbox'  checked><label for='section-758f915a-4c22-4d94-9574-e7f348e20bda' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>temperature</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.7354 0.4581 ... 0.1689 0.862</div><input id='attrs-8b8e76bd-156e-4869-94fb-060446e0c201' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8b8e76bd-156e-4869-94fb-060446e0c201' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b180d202-ea4b-435a-be88-a525b25b57af' class='xr-var-data-in' type='checkbox'><label for='data-b180d202-ea4b-435a-be88-a525b25b57af' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.73537092, 0.45809564, 0.68102467, ..., 0.58670172,\n         0.9231434 , 0.39858542],\n        [0.6036277 , 0.17717862, 0.1311996 , ..., 0.61035319,\n         0.13848547, 0.56715586],\n        [0.63696474, 0.6201946 , 0.00372995, ..., 0.41149546,\n         0.28156088, 0.93576605],\n        ...,\n        [0.31875239, 0.62034642, 0.29289192, ..., 0.13679458,\n         0.52433078, 0.03124511],\n        [0.4471717 , 0.02673827, 0.95276322, ..., 0.19292661,\n         0.99691574, 0.95393047],\n        [0.29801911, 0.72835742, 0.72491621, ..., 0.07429763,\n         0.61648053, 0.50132588]],\n\n       [[0.83046974, 0.25563095, 0.29712974, ..., 0.42019473,\n         0.41915186, 0.77083157],\n        [0.40197269, 0.89824124, 0.5167072 , ..., 0.04082787,\n         0.11080842, 0.77827145],\n        [0.91569241, 0.25864566, 0.76332239, ..., 0.8319535 ,\n         0.65929607, 0.69372127],\n...\n        [0.12242954, 0.11933535, 0.05036088, ..., 0.64525521,\n         0.03472314, 0.40484595],\n        [0.14459508, 0.2341668 , 0.57275164, ..., 0.97433116,\n         0.22527367, 0.45072553],\n        [0.7932117 , 0.01310721, 0.24229464, ..., 0.25495209,\n         0.38657914, 0.85389341]],\n\n       [[0.8904773 , 0.97734866, 0.19483127, ..., 0.44823684,\n         0.48349507, 0.48254431],\n        [0.69106457, 0.93766895, 0.06582307, ..., 0.73308683,\n         0.01181996, 0.82019304],\n        [0.0976463 , 0.34937663, 0.64000643, ..., 0.66810402,\n         0.12100529, 0.74194131],\n        ...,\n        [0.07460134, 0.36679947, 0.16375436, ..., 0.45088112,\n         0.57333167, 0.55218461],\n        [0.78755196, 0.62957216, 0.76995534, ..., 0.85232957,\n         0.32428252, 0.55082061],\n        [0.05098048, 0.37393814, 0.16761489, ..., 0.80773466,\n         0.16890561, 0.86197212]]], shape=(10, 10, 50))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>precipitation</span></div><div class='xr-var-dims'>(x, y, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.9583 0.8724 ... 0.411 0.6209</div><input id='attrs-f523d1c7-d055-4e6d-845c-4750d909d199' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f523d1c7-d055-4e6d-845c-4750d909d199' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e2d6e6cf-944e-4451-92a6-544a0d444d66' class='xr-var-data-in' type='checkbox'><label for='data-e2d6e6cf-944e-4451-92a6-544a0d444d66' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[0.95834132, 0.87243774, 0.76391552, ..., 0.69756531,\n         0.90056793, 0.30527412],\n        [0.25019404, 0.52022682, 0.86749413, ..., 0.72006895,\n         0.49718213, 0.59695163],\n        [0.37943503, 0.82962591, 0.30664744, ..., 0.7597681 ,\n         0.62854223, 0.20455609],\n        ...,\n        [0.70572506, 0.3639288 , 0.9744724 , ..., 0.56121349,\n         0.08487188, 0.15691857],\n        [0.36254129, 0.77753486, 0.97552941, ..., 0.42118428,\n         0.50005376, 0.91414361],\n        [0.1755658 , 0.27551722, 0.34406445, ..., 0.77337649,\n         0.41987317, 0.99605131]],\n\n       [[0.00451477, 0.5349297 , 0.70054919, ..., 0.85326259,\n         0.0840251 , 0.47774334],\n        [0.92472385, 0.85087475, 0.36690708, ..., 0.80743513,\n         0.01906034, 0.98487147],\n        [0.51028795, 0.75528546, 0.3092481 , ..., 0.53264952,\n         0.48647912, 0.96728086],\n...\n        [0.58735632, 0.41071573, 0.25775308, ..., 0.08926412,\n         0.00909389, 0.37417653],\n        [0.29744133, 0.40558768, 0.63963201, ..., 0.58261541,\n         0.10836689, 0.47012577],\n        [0.91467036, 0.70856793, 0.50978671, ..., 0.31416631,\n         0.02880694, 0.37946882]],\n\n       [[0.63223518, 0.35945254, 0.30344822, ..., 0.64044685,\n         0.83842166, 0.15239269],\n        [0.51634376, 0.01647559, 0.29630614, ..., 0.18990179,\n         0.09516875, 0.88830932],\n        [0.34549571, 0.95110295, 0.80658022, ..., 0.15361423,\n         0.72185373, 0.853188  ],\n        ...,\n        [0.18032203, 0.56885597, 0.9271283 , ..., 0.00926782,\n         0.58293505, 0.22450661],\n        [0.23651412, 0.38582911, 0.68062806, ..., 0.88191258,\n         0.08158899, 0.32603981],\n        [0.20143344, 0.32975715, 0.71494672, ..., 0.59084954,\n         0.41096117, 0.62090321]]], shape=(10, 10, 50))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-19d70438-a482-4d5c-a403-64d009c6c59d' class='xr-section-summary-in' type='checkbox'  ><label for='section-19d70438-a482-4d5c-a403-64d009c6c59d' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-bbe04555-b3e4-486b-baf8-27c9d8fd4e3b' class='xr-index-data-in' type='checkbox'/><label for='index-bbe04555-b3e4-486b-baf8-27c9d8fd4e3b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;x&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-59da690d-facc-4125-ba11-13e19969f20b' class='xr-index-data-in' type='checkbox'/><label for='index-59da690d-facc-4125-ba11-13e19969f20b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=&#x27;int64&#x27;, name=&#x27;y&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-ee181178-b02e-446e-a0d0-f2f3e91d579c' class='xr-index-data-in' type='checkbox'/><label for='index-ee181178-b02e-446e-a0d0-f2f3e91d579c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,\n       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],\n      dtype=&#x27;int64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0cf2c3c4-7bf6-4866-b79c-7b07b62aa1ef' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-0cf2c3c4-7bf6-4866-b79c-7b07b62aa1ef' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"}}}],"key":"h78ci7lZxw"}],"key":"jKX3jCEtdF"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kLQTmh3Ii5"},{"type":"inlineCode","value":"input_overlap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rz5dut1mHa"},{"type":"text","value":" parameter specifies the number of elements to overlap between consecutive batches. The size of the batches themselves does not change. Let’s verify this by inspecting the coordinates of the first two batches.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BlZYLmAd3V"}],"key":"O7HLYpXXR3"}],"key":"kxbk0qdAaF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"Batch 1 y-coords: {bgen_overlap[0].y.values}, Batch 1 x-coords: {bgen_overlap[0].x.values}\")\nprint(f\"Batch 2 y-coords: {bgen_overlap[1].y.values}, Batch 2 x-coords: {bgen_overlap[1].x.values}\")\nprint(f\"Batch 3 y-coords: {bgen_overlap[2].y.values}, Batch 3 x-coords: {bgen_overlap[2].x.values}\")\nprint(f\"Batch 13 y-coords: {bgen_overlap[12].y.values}, Batch 13 x-coords: {bgen_overlap[12].x.values}\")\nprint(f\"Batch 14 y-coords: {bgen_overlap[13].y.values}, Batch 11 x-coords: {bgen_overlap[13].x.values}\")","key":"ogxivq329z"},{"type":"output","id":"oG1ItKa7tw32ZOHksOcm8","data":[{"output_type":"stream","name":"stdout","text":"Batch 1 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 1 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 2 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 2 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 3 y-coords: [16 17 18 19 20 21 22 23 24 25], Batch 3 x-coords: [0 1 2 3 4 5 6 7 8 9]\nBatch 13 y-coords: [0 1 2 3 4 5 6 7 8 9], Batch 13 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\nBatch 14 y-coords: [ 8  9 10 11 12 13 14 15 16 17], Batch 11 x-coords: [ 8  9 10 11 12 13 14 15 16 17]\n"}],"key":"fIAb2hVkUi"}],"key":"w0SOAJW162"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As you can see, the second batch starts at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DpfQJjjkri"},{"type":"inlineCode","value":"y=8","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XK3jBSRakt"},{"type":"text","value":", which is an overlap of 2 elements with the first batch, which ends at ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"R1hh6bZQi0"},{"type":"inlineCode","value":"y=9","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H6QW7mavKg"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tzsnY0XJQl"}],"key":"flyi87byhN"}],"key":"Kzi91IU5Ed"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Integration with PyTorch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RgofsOBjGh"}],"identifier":"integration-with-pytorch","label":"Integration with PyTorch","html_id":"integration-with-pytorch","implicit":true,"key":"mB2ZW0RI2U"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xxVG8EQi4g"},{"type":"text","value":" provides ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NoWoiWLKJc"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"se3AW51kqS"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"knKaE1lfBJ"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VdoDQgWrjY"},{"type":"text","value":" to wrap the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NGZ2JdTx15"},{"type":"inlineCode","value":"BatchGenerator","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NbODHDMDMo"},{"type":"text","value":" for use with PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wVWLvltFvY"}],"key":"NgTVfq2Wsw"}],"key":"AusyWJi9RO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"APzVMr2mjD"},{"type":"text","value":" vs. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Jy8DynHSZ4"},{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WUezk6aleH"}],"identifier":"mapdataset-vs-iterabledataset","label":"MapDataset vs. IterableDataset","html_id":"mapdataset-vs-iterabledataset","implicit":true,"key":"r1jVhOYKKW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HKyPI7JZ14"},{"type":"text","value":": Implements ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lZImHSD138"},{"type":"inlineCode","value":"__getitem__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zNgY6tcOwq"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hQ32NMfIB2"},{"type":"inlineCode","value":"__len__","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wSmEf4j8qE"},{"type":"text","value":", allowing for random access to data samples. This is the most common type of dataset in PyTorch.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oTnYYFuTEC"}],"key":"wva7n6x6ch"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"IterableDataset","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pFH75xZwqB"},{"type":"text","value":": Implements ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"KbGxUEkCzP"},{"type":"inlineCode","value":"__iter__","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"xIwSkoOWlT"},{"type":"text","value":", and is suitable for very large datasets that may not fit into memory, as it streams data.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"iFy5vDUXb7"}],"key":"hTedoOssM6"}],"key":"CLxvnIIOSG"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We will use ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"tkqMbfsMrg"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FksPP6aEB6"},{"type":"text","value":" for this example.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aL7jfC7mZ2"}],"key":"nidOpnjCBr"}],"key":"ClGPDwAEl1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bgen[0].temperature.shape\nbgen[0].precipitation.shape","key":"p8nngtqlqt"},{"type":"output","id":"yXy8lLCjI8VFTOmMLb-x4","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"(10, 10, 50)","content_type":"text/plain"}}}],"key":"LhQWeBRUzV"}],"key":"h0FpiRwhZe"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def patch_to_tensor(patch):\n    temp_patch = torch.tensor(patch.temperature.data)\n    prcp_patch = torch.tensor(patch.precipitation.data)\n    stacked_patch = torch.stack((temp_patch, prcp_patch), dim=0)\n    patch = stacked_patch\n    patch = torch.nan_to_num(patch)\n    # patch = torch.unsqueeze(patch, 0)\n    patch = patch.float()\n    return patch\n\nmap_ds = MapDataset(bgen, transform=patch_to_tensor)","key":"U68UqXUnJg"},{"type":"output","id":"b4nOcDtb7Im7TprKMCs50","data":[],"key":"EsPTcJSxf6"}],"key":"tE0SvXo151"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MsY2BXMEQr"},{"type":"inlineCode","value":"MapDataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KqHawacITT"},{"type":"text","value":" can then be used with a PyTorch ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kfNWCN0cU0"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TW99hDHswn"},{"type":"text","value":", which provides utilities for shuffling, batching, and multiprocessing.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t7AOGWxSYI"}],"key":"kHaYTWzyUZ"}],"key":"FkZrze1tqi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dataloader = torch.utils.data.DataLoader(map_ds, batch_size=4)","key":"getqxu96eH"},{"type":"output","id":"jpJvgEbtXWNPfQawJu_af","data":[],"key":"iSxsN7MAYJ"}],"key":"GADC86VMkh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspecting a batch from the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W6lh1Dcxod"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dnkjS1rUWi"},{"type":"text","value":" reveals a batch of PyTorch tensors.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"njwLIdc0KY"}],"key":"oMd7wYfq6Y"}],"key":"xXJa6CIL5N"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"torch_batch = next(iter(dataloader))\ntorch_batch.shape","key":"BVCBOUJ9xV"},{"type":"output","id":"9hyOth3_1yszzDTlWjqL1","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"torch.Size([4, 2, 10, 10, 50])","content_type":"text/plain"}}}],"key":"tD01gr6OTa"}],"key":"bwf8W3WACK"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tU09rS1yhC"},{"type":"inlineCode","value":"DataLoader","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zsYwH7K8hn"},{"type":"text","value":" has stacked 4 of the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OSF55xidVa"},{"type":"inlineCode","value":"xbatcher","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"M00VpezHfb"},{"type":"text","value":" batches, creating a new ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FP9qBUtNs5"},{"type":"inlineCode","value":"batch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jNy5vymsnr"},{"type":"text","value":" dimension of size 4. The data is now ready for use in a PyTorch model.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B9RuVicQCd"}],"key":"tUpXUN31tL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the next notebook, we will explore how to reconstruct an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wNFmrJB0PM"},{"type":"inlineCode","value":"xarray.Dataset","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"a4hV3hpCXM"},{"type":"text","value":" from a model’s output.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"D5O3SLKlqW"}],"key":"C8Vw6S10fv"}],"key":"tFont6bilA"}],"key":"pxZMIm8u3g"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Reconstructing Xarray Datasets from Model Outputs","url":"/notebooks/xbatcher-reconstruction","group":"Xbatcher fundamentals"}}},"domain":"http://localhost:3000"}